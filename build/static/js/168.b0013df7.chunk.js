(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[168],{1842:function(e,t,n){"use strict";n.r(t);var s=n(716),c=n(1),a=n(922),r=n(38),o=n(718),l=n(76),i=n(32),d=n(60),u=n(14);t.default=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],j=t[1],b=Object(c.useState)([]),m=Object(s.a)(b,2),h=m[0],O=m[1],p=Object(c.useState)(""),v=Object(s.a)(p,2),f=v[0],x=v[1],g=Object(c.useState)(""),N=Object(s.a)(g,2),S=N[0],C=N[1],_=Object(l.c)(i.c),w=Object(l.c)(d.d),y=Object(c.useState)(""),D=Object(s.a)(y,2),k=D[0],I=D[1];return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"mb-5 content__container row",children:[Object(u.jsx)("h3",{children:"Select Student "}),Object(u.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),r.a.get("/students/search/".concat(S)).then((function(e){if(console.log(e.data),e.data.error)return console.log("error"),Object(o.c)(e.data.error),0;O(e.data.users.map((function(e){return{id:e.userID,name:e.name,telephone:(null===e||void 0===e?void 0:e.mobilenumber)||(null===e||void 0===e?void 0:e.telephone),surname:e.surname}})))}))},className:"mb-5 col-md-6",children:[Object(u.jsx)("label",{className:"form-label",children:"Search Student by Name or Student ID"}),Object(u.jsx)("input",{value:S,onChange:function(e){return C(e.target.value)},className:"form-control",type:"text",placeholder:"Type here..."})]}),Object(u.jsxs)("div",{className:"col-md-5",children:[Object(u.jsx)("label",{className:"form-label",children:"OR Select Student's Class"}),Object(u.jsxs)("select",{onChange:function(e){return function(e){console.log(e),r.a.get("/students/class/".concat(e)).then((function(e){if(console.log(e.data),e.data.error)return console.log("error"),Object(o.c)(e.data.error);O(e.data.users.map((function(e){return{id:e.userID,name:e.name,telephone:(null===e||void 0===e?void 0:e.telephone)||(null===e||void 0===e?void 0:e.mobilenumber),surname:e.surname}})))}))}(e.target.value)},id:"inputState",className:"form-select",children:[Object(u.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),_.map((function(e){return Object(u.jsx)("option",{value:e.classCode,children:e.name},e._id)}))]})]})]}),h.length>0&&Object(u.jsx)(a.a,{message:n,setmessage:j,onSend:function(e){if(e.preventDefault(),n&&f){I(!0);var t=h.find((function(e){return e.id===f}));if(!(null===t||void 0===t?void 0:t.telephone))return I(!1),Object(o.c)("Student does not have phone number");console.log(t),r.a.post("/chats",{message:n,telephone:null===t||void 0===t?void 0:t.telephone,userID:f,sender:null===w||void 0===w?void 0:w.id}).then((function(e){if(I(!1),e.data.error)return Object(o.c)(e.data.error),0;Object(o.m)("message send"),j("")})).catch((function(e){console.log(e),I(!1)}))}},recipientsOptions:h,recipient:f,setrecipient:x,sender:null===w||void 0===w?void 0:w.id,loading:k,searchOptions:function(){return h.map((function(e){return Object(u.jsxs)("option",{value:e.id,children:[e.name," ",e.surname," ",e.id," "]},e.id)}))},sendto:"Student"})]})}},922:function(e,t,n){"use strict";n(1);var s=n(14);t.a=function(e){var t=e.message,n=e.setmessage,c=e.onSend,a=e.recipient,r=e.setrecipient,o=e.sender,l=e.sendto,i=e.searchOptions,d=e.loading,u=e.error;return Object(s.jsxs)("form",{action:"",className:" content__container form__sender",children:[Object(s.jsx)("div",{className:"header",children:Object(s.jsxs)("h3",{children:["Send Message to ",l]})}),Object(s.jsxs)("div",{className:"row mb-2 px-3",children:[Object(s.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Recipient:"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsxs)("select",{value:a,onChange:function(e){return r(e.target.value)},id:"inputState",className:"form-select",children:[Object(s.jsx)("option",{defaultChecked:!0,hidden:!0,children:"Choose..."}),i?i():Object(s.jsx)("option",{disabled:!0,children:"No options"})]})})]}),Object(s.jsxs)("div",{className:"row mb-2 px-3",children:[Object(s.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Sender:"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsx)("input",{className:"form-control",value:o,type:"text",readOnly:!0})})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("div",{className:"col-12",children:Object(s.jsx)("textarea",{value:t,onChange:function(e){return n(e.target.value)},className:"form-control",name:"",rows:"10",required:!0,placeholder:"Type here"})}),u&&Object(s.jsx)("div",{className:"text-danger text-center mb-2",children:u}),Object(s.jsx)("div",{className:"col-12",children:Object(s.jsxs)("button",{disabled:d,onClick:c,className:"btn blue__btn w-100",children:[d&&Object(s.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Send"]})})]})]})}}}]);
//# sourceMappingURL=168.b0013df7.chunk.js.map