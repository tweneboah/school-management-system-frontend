(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[116],{1820:function(e,t,n){"use strict";n.r(t);var a=n(737),c=n.n(a),i=n(738),l=n(80),s=n(719),r=n(1),o=n(752),d=n(785),u=n(136),j=n(38),b=n(22),v=n(721),h=n(79),m=n(32),f=n(14),O=[{id:"classCode",name:"ID"},{id:"name",name:"Class"},{id:"campusID",name:"Campus"},{id:"group",name:"Group"},{id:"division",name:"Division"},{id:"prefect",name:"Prefect"},{id:"teacherID",name:"Class Teacher"},{id:"sba",name:"S.B.A Config"},{id:"sbaStaff",name:"SBA Staff"}];t.default=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],x=Object(r.useState)(""),p=Object(s.a)(x,2),g=p[0],C=p[1],w=Object(r.useState)(""),S=Object(s.a)(w,2),_=S[0],N=S[1],y=Object(r.useState)([]),D=Object(s.a)(y,2),M=D[0],P=D[1],I=Object(r.useState)([]),k=Object(s.a)(I,2),L=k[0],z=k[1],E=Object(h.c)(m.l),A=Object(r.useState)(!1),H=Object(s.a)(A,2),V=H[0],R=H[1],F=Object(h.c)(m.b),T=Object(b.g)(),Y=Object(h.b)();Object(r.useEffect)((function(){R(!0),j.a.get("/classes").then((function(e){R(!1);var t=e.data.map((function(e){var t,n,a;return Object(l.a)(Object(l.a)({},e),{},{num:0,sba:e.sba?"set":"not set",teacherID:((null===(t=E.find((function(t){return t.userID===e.teacherID})))||void 0===t?void 0:t.name)||"-")+" "+((null===(n=E.find((function(t){return t.userID===e.teacherID})))||void 0===n?void 0:n.surname)||""),campusID:null===(a=F.find((function(t){return t._id===e.campusID})))||void 0===a?void 0:a.name})}));P(t),z(t)}))}),[E,F]);var B=[{type:"text",label:"Search Name",value:n,name:"name",onChange:a},{type:"text",label:"Search Campus",value:g,name:"campus",onChange:C},{type:"text",label:"Search Teacher",value:_,name:"teacher",onChange:N}];return Object(f.jsxs)("div",{children:[Object(f.jsx)(d.a,{title:"Search classes ",inputFields:B,handleSearch:function(e){e.preventDefault();var t=[];n&&(t=L.filter((function(e){return(null===e||void 0===e?void 0:e.name.toLowerCase().includes(null===n||void 0===n?void 0:n.toLowerCase()))||(null===e||void 0===e?void 0:e.classCode.toLowerCase().includes(null===n||void 0===n?void 0:n.toLowerCase()))}))),g&&(t=t.filter((function(e){return null===e||void 0===e?void 0:e.campusID.toLowerCase().includes(null===g||void 0===g?void 0:g.toLowerCase())}))),_&&(t=t.filter((function(e){return null===e||void 0===e?void 0:e.teacherID.toLowerCase().includes(null===_||void 0===_?void 0:_.toLowerCase())}))),P(t)},handleReset:function(e){e.preventDefault(),a(""),C(""),N(""),P(L)}}),Object(f.jsxs)("div",{className:"content__container",children:[Object(f.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(f.jsx)("h3",{children:"Classes List"}),Object(f.jsx)(u.b,{to:"/academics/classes/add",className:"btn orange__btn btn__lg",children:"Add New Class"})]}),Object(f.jsx)(o.a,{handleEdit:function(e){T.push("/academics/classes/edit/".concat(e))},loading:V,handleDelete:function(e){window.confirm("are you sure you want to delete")&&j.a.delete("/classes/delete/".concat(e)).then(function(){var t=Object(i.a)(c.a.mark((function t(a){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data.error){t.next=3;break}return Object(v.c)(a.data.error),t.abrupt("return",0);case 3:return P(M.filter((function(t){return t._id!==e}))),i=M.find((function(t){return t._id===e})),Y(Object(m.q)(M.filter((function(t){return t._id!==e})))),t.next=8,j.a.post("/activitylog/create",{activity:" ".concat(null===i||void 0===i?void 0:i.name," class was deleted"),user:"admin"});case 8:return t.next=10,j.a.post("/fees/delete/name",{name:n});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},data:M,tableHeader:O})]})]})}},728:function(e,t,n){"use strict";var a=n(715),c=n(717);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(1)),l=(0,a(n(716)).default)(i.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=l},736:function(e,t,n){"use strict";n(1);var a=n(563),c=n(189),i=n(1780),l=n(733),s=n.n(l),r=n(735),o=n.n(r),d=n(734),u=n.n(d),j=n(732),b=n.n(j),v=n(14),h=Object(a.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));t.a=function(e){var t=h(),n=Object(c.a)(),a=e.count,l=e.page,r=e.rowsPerPage,d=e.onChangePage;return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(i.a,{onClick:function(e){d(e,0)},disabled:0===l,"aria-label":"first page",children:"rtl"===n.direction?Object(v.jsx)(b.a,{}):Object(v.jsx)(s.a,{})}),Object(v.jsx)(i.a,{onClick:function(e){d(e,l-1)},disabled:0===l,"aria-label":"previous page",children:"rtl"===n.direction?Object(v.jsx)(u.a,{}):Object(v.jsx)(o.a,{})}),Object(v.jsx)(i.a,{onClick:function(e){d(e,l+1)},disabled:l>=Math.ceil(a/r)-1,"aria-label":"next page",children:"rtl"===n.direction?Object(v.jsx)(o.a,{}):Object(v.jsx)(u.a,{})}),Object(v.jsx)(i.a,{onClick:function(e){d(e,Math.max(0,Math.ceil(a/r)-1))},disabled:l>=Math.ceil(a/r)-1,"aria-label":"last page",children:"rtl"===n.direction?Object(v.jsx)(s.a,{}):Object(v.jsx)(b.a,{})})]})}},737:function(e,t,n){e.exports=n(424)},738:function(e,t,n){"use strict";function a(e,t,n,a,c,i,l){try{var s=e[i](l),r=s.value}catch(o){return void n(o)}s.done?t(r):Promise.resolve(r).then(a,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,i){var l=e.apply(t,n);function s(e){a(l,c,i,s,r,"next",e)}function r(e){a(l,c,i,s,r,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return c}))},739:function(e,t,n){"use strict";var a=n(715),c=n(717);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(1)),l=(0,a(n(716)).default)(i.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");t.default=l},746:function(e,t,n){"use strict";var a=n(715),c=n(717);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(1)),l=(0,a(n(716)).default)(i.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");t.default=l},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var a=n(719),c=n(1),i=n.n(c),l=n(563),s=n(1064),r=n(1065),o=n(1060),d=n(1062),u=n(1063),j=n(795),b=n(1887),v=n(1061),h=n(944),m=n(1780),f=n(728),O=n.n(f),x=n(739),p=n.n(x),g=n(736),C=n(725),w=n.n(C),S=n(918),_=n(746),N=n.n(_),y=n(14),D=Object(l.a)({table:{width:"100%"}});function M(e){var t,n=e.data,c=e.tableHeader,l=e.handleEdit,f=e.handleDelete,x=e.loading,C=e.isCanteen,_=e.isEdit,M=e.isItems,P=e.noActions,I=e.noData,k=D(),L=i.a.useState(0),z=Object(a.a)(L,2),E=z[0],A=z[1],H=i.a.useState(5),V=Object(a.a)(H,2),R=V[0],F=V[1],T=R-Math.min(R,(null===n||void 0===n?void 0:n.length)-E*R);return Object(y.jsx)(u.a,{component:h.a,children:Object(y.jsxs)(s.a,{className:k.table,"aria-label":"custom pagination table",children:[Object(y.jsx)(o.a,{children:Object(y.jsxs)(v.a,{children:[c&&(null===c||void 0===c?void 0:c.map((function(e){return Object(y.jsx)(d.a,{children:e.name},e.id)}))),!P&&Object(y.jsx)(d.a,{children:"Actions"})]})}),x?Object(y.jsx)(r.a,{className:"text-center my-5 w-100",children:Object(y.jsx)(v.a,{children:Object(y.jsx)(d.a,{colSpan:c.lenght,children:Object(y.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status"})})})}):Object(y.jsxs)(r.a,{children:[(null===n||void 0===n?void 0:n.length)<=0?Object(y.jsx)(v.a,{children:Object(y.jsx)(d.a,{colSpan:c.length+1,className:"text-center text-danger",children:I||"No data"})}):Object(y.jsx)(y.Fragment,{children:null===(t=R>0?null===n||void 0===n?void 0:n.slice(E*R,E*R+R):n)||void 0===t?void 0:t.map((function(e){return Object(y.jsxs)(v.a,{children:[c&&(null===c||void 0===c?void 0:c.map((function(t){var n,a;return Object(y.jsx)(d.a,{align:"left",children:(a=e[null===t||void 0===t?void 0:t.id],new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(a)?null===(n=w()(e[null===t||void 0===t?void 0:t.id]))||void 0===n?void 0:n.format("D MMMM YYYY"):e[null===t||void 0===t?void 0:t.id]||"-")},null===t||void 0===t?void 0:t.id)}))),!P&&Object(y.jsx)(d.a,{align:"left",children:Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)(S.a,{title:M?"Manage Inventory":"delete",children:Object(y.jsx)(m.a,{onClick:function(){return f(C?e.memberID:e._id)},children:M?Object(y.jsx)(N.a,{}):Object(y.jsx)(p.a,{})})}),!_&&Object(y.jsx)(S.a,{title:"edit",children:Object(y.jsx)(m.a,{onClick:function(){return l(C?e.memberID:e._id)},children:Object(y.jsx)(O.a,{})})})]})})]},e._id)}))}),T>0&&Object(y.jsx)(v.a,{style:{height:53},children:Object(y.jsx)(d.a,{colSpan:6})})]}),Object(y.jsx)(j.a,{children:Object(y.jsx)(v.a,{children:(null===n||void 0===n?void 0:n.length)>5&&Object(y.jsx)(b.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],count:null===n||void 0===n?void 0:n.length,rowsPerPage:R,page:E,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){A(t)},onChangeRowsPerPage:function(e){F(parseInt(e.target.value,10)),A(0)},ActionsComponent:g.a})})})]})})}},785:function(e,t,n){"use strict";n(1);var a=n(14);t.a=function(e){var t=e.inputFields,n=e.title,c=e.handleSearch,i=e.isReset,l=e.handleReset,s=e.noActions;return Object(a.jsxs)("form",{className:"mb-5 content__container",children:[Object(a.jsx)("h3",{className:"mb-3",children:n||""}),Object(a.jsxs)("div",{className:"row g-3 mb-3",children:[t&&t.map((function(e){return Object(a.jsxs)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:[Object(a.jsx)("label",{htmlFor:"",children:e.label}),"select"===e.type?Object(a.jsxs)("select",{value:null===e||void 0===e?void 0:e.value,name:null===e||void 0===e?void 0:e.name,onChange:function(t){return null===e||void 0===e?void 0:e.onChange(t.target.value)},className:"form-select form-select-sm py-2",children:[Object(a.jsx)("option",{hidden:!0,defaultValue:!0,children:"Select"}),(null===e||void 0===e?void 0:e.options.length)>0?null===e||void 0===e?void 0:e.options.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)})):Object(a.jsx)("option",{disabled:!0,children:"No data "})]}):Object(a.jsx)("input",{type:e.type,value:e.value,name:null===e||void 0===e?void 0:e.name,className:"form-control py-3",placeholder:"Search by ".concat(e.name),onChange:function(t){return null===e||void 0===e?void 0:e.onChange(t.target.value)}})]},null===e||void 0===e?void 0:e.name)})),!s&&Object(a.jsxs)("div",{className:"col-xs-12 col-sm-6 col-md-4 d-flex mt-5",children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("button",{className:"btn orange__btn ",onClick:c,children:"Search"})}),!i&&Object(a.jsx)("div",{className:" mb-3 ml-3",children:Object(a.jsx)("button",{onClick:l,className:"btn blue__btn ",children:"Reset"})})]})]})]})}}}]);
//# sourceMappingURL=116.f2df3f7f.chunk.js.map