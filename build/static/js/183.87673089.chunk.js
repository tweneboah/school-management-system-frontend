(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[183],{1862:function(e,t,a){"use strict";a.r(t);var s=a(735),o=a.n(s),i=a(736),n=a(716),l=a(1),c=a(1115),r=a(1454),d=a(1116),u=a(1169),b=a(1241),j=a(748),v=a(22),O=a(38),h=a(718),m=(a(60),a(76)),p=a(1114),f=a(722),S=a.n(f),g=a(14);t.default=function(){var e=Object(v.i)().id,t=(Object(m.b)(),Object(l.useState)("")),a=Object(n.a)(t,2),s=a[0],f=a[1],x=Object(l.useState)(""),y=Object(n.a)(x,2),D=y[0],N=y[1],w=Object(l.useState)(""),I=Object(n.a)(w,2),B=I[0],k=I[1],A=Object(l.useState)(""),C=Object(n.a)(A,2),_=C[0],U=C[1],Y=Object(l.useState)(""),E=Object(n.a)(Y,2),F=E[0],R=E[1],J=Object(l.useState)(""),L=Object(n.a)(J,2),M=L[0],T=L[1],z=Object(l.useState)(""),G=Object(n.a)(z,2),H=G[0],q=G[1],K=Object(l.useState)(""),P=Object(n.a)(K,2),Q=P[0],V=P[1],W=Object(l.useState)(""),X=Object(n.a)(W,2),Z=X[0],$=X[1],ee=Object(l.useState)(""),te=Object(n.a)(ee,2),ae=te[0],se=te[1],oe=Object(l.useState)(""),ie=Object(n.a)(oe,2),ne=ie[0],le=ie[1],ce=Object(l.useState)(""),re=Object(n.a)(ce,2),de=re[0],ue=re[1],be=Object(l.useState)(""),je=Object(n.a)(be,2),ve=je[0],Oe=je[1],he=Object(l.useState)(""),me=Object(n.a)(he,2),pe=me[0],fe=me[1],Se=Object(l.useState)(!1),ge=Object(n.a)(Se,2),xe=ge[0],ye=ge[1],De=Object(j.a)(),Ne=De.register,we=De.handleSubmit,Ie=De.errors,Be=Object(l.useState)(!0),ke=Object(n.a)(Be,2),Ae=ke[0],Ce=ke[1],_e=Object(l.useState)(""),Ue=Object(n.a)(_e,2),Ye=Ue[0],Ee=Ue[1],Fe=Object(l.useState)(""),Re=Object(n.a)(Fe,2),Je=Re[0],Le=Re[1],Me=Object(l.useState)(""),Te=Object(n.a)(Me,2),ze=Te[0],Ge=Te[1],He=Object(l.useState)(null),qe=Object(n.a)(He,2),Ke=qe[0],Pe=qe[1],Qe=Object(l.useState)(""),Ve=Object(n.a)(Qe,2),We=Ve[0],Xe=Ve[1],Ze=Object(l.useState)(""),$e=Object(n.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(l.useState)(""),st=Object(n.a)(at,2),ot=st[0],it=st[1],nt=Object(l.useState)(""),lt=Object(n.a)(nt,2),ct=lt[0],rt=lt[1],dt=Object(l.useState)(""),ut=Object(n.a)(dt,2),bt=ut[0],jt=ut[1],vt=Object(l.useState)(""),Ot=Object(n.a)(vt,2),ht=Ot[0],mt=Ot[1],pt=Object(l.useState)(""),ft=Object(n.a)(pt,2),St=ft[0],gt=ft[1],xt=Object(l.useState)(""),yt=Object(n.a)(xt,2),Dt=yt[0],Nt=yt[1],wt=Object(l.useState)(""),It=Object(n.a)(wt,2),Bt=It[0],kt=It[1],At=Object(l.useState)(""),Ct=Object(n.a)(At,2),_t=Ct[0],Ut=Ct[1],Yt=Object(l.useState)(""),Et=Object(n.a)(Yt,2),Ft=Et[0],Rt=Et[1],Jt=Object(l.useState)([]),Lt=Object(n.a)(Jt,2),Mt=Lt[0],Tt=Lt[1];Object(l.useEffect)((function(){O.a.get("/students/student/".concat(e)).then((function(e){var t,a,s,o,i,n,l=e.data.student;f(null===l||void 0===l?void 0:l.name),N(null===l||void 0===l?void 0:l.surname),k(null===l||void 0===l?void 0:l.middleName),U(null===l||void 0===l?void 0:l.gender),R((null===l||void 0===l?void 0:l.dateofBirth)?S()(null===l||void 0===l?void 0:l.dateofBirth).format("YYYY-MM-D"):" "),T(null===l||void 0===l?void 0:l.email),q(null===l||void 0===l?void 0:l.nationality),V(null===l||void 0===l?void 0:l.placeofBirth),$(null===l||void 0===l?void 0:l.religion),se(null===l||void 0===l?void 0:l.health),jt(null===l||void 0===l?void 0:l.division),le(null===l||void 0===l?void 0:l.allege),mt(null===l||void 0===l?void 0:l.campusID),ue(null===l||void 0===l?void 0:l.disease),Le(null===l||void 0===l?void 0:l.classID),Ge(null===l||void 0===l?void 0:l.section),Pe(null===l||void 0===l?void 0:l.status),tt(null===l||void 0===l?void 0:l.scholarship),Xe(null===l||void 0===l?void 0:l.dormitoryID),tt(null===l||void 0===l?void 0:l.schoolarship),it(null===l||void 0===l?void 0:l.fees),rt(null===l||void 0===l||null===(t=l.lastSchool)||void 0===t||null===(a=t.school)||void 0===a||null===(s=a.school)||void 0===s?void 0:s.school),gt(null===l||void 0===l||null===(o=l.lastSchool)||void 0===o||null===(i=o.school)||void 0===i||null===(n=i.school)||void 0===n?void 0:n.reason),Nt(null===l||void 0===l?void 0:l.mobilenumber),kt(null===l||void 0===l?void 0:l.physicalAddress),Ut(null===l||void 0===l?void 0:l.telephone),Rt(null===l||void 0===l?void 0:l.postalAddress),Tt(null===l||void 0===l?void 0:l.guadian),fe(null===l||void 0===l?void 0:l.profileUrl)}))}),[e]);var zt=function(){var t=Object(i.a)(o.a.mark((function t(){var a,n,l,c,r,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ye(!0),r=new FormData,d="",!ve){t.next=8;break}return r.append("photo",ve),t.next=7,O.a.post("/upload",r,{});case 7:d=t.sent;case 8:return console.log(null===(a=d)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.path),t.next=11,O.a.put("/students/update/".concat(e),{profileUrl:(null===(l=d)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.path)||pe,name:s,middleName:B,surname:D,gender:_,dateofBirth:F,email:M,nationality:H,religion:Z,placeofBirth:Q,health:ae,disease:de,division:bt,allege:ne,classID:Je,campusID:ht,section:ze,dormitoryID:We,status:Ke,scholarship:et,fees:ot,lastSchool:{school:ct,reason:St},mobilenumber:Dt,telephone:_t,postalAddress:Ft,physicalAddress:Bt,guadian:Mt}).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye(!1),!t.data.error){e.next=3;break}return e.abrupt("return",Object(h.c)(t.data.error));case 3:return Object(h.m)("successfully updated"),e.next=6,O.a.post("/activitylog/create",{activity:"student  ".concat(s," ").concat(D," was edited"),user:"admin"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ye(!1),console.log(e),Object(h.c)("something went wrong")}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Gt=function(e){Tt(Mt.filter((function(t){return t.id!==e})))};return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Edit Students"}),Object(g.jsx)("div",{children:Object(g.jsxs)("form",{action:"",className:"content__container",children:[Object(g.jsx)(u.a,{profileimg:pe,profileUrl:ve,setprofileUrl:function(e){var t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)Object(h.c)("image is too large");else if(t){Oe(t);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){fe(a.result)}}else console.log("no file selected")}}),Object(g.jsx)(c.a,{register:Ne,errors:Ie,name:s,setname:f,secondName:B,setsecondName:k,lastname:D,setlastname:N,gender:_,setgender:U,dateofBirth:F,setdateofBirth:R,email:M,setemail:T,nationality:H,setnationality:q,placeofBirth:Q,setplaceofBirth:V,religion:Z,setreligion:$,healthCon:ae,setHealthCon:se,disease:de,setDisease:ue,allerge:ne,setallerge:le}),Object(g.jsx)("br",{className:"my-5"}),Object(g.jsx)(r.a,{register:Ne,errors:Ie,isEdit:!0,autoID:Ae,setautoID:Ce,userID:Ye,setuserID:Ee,classID:Je,setclass:Le,division:bt,setdivision:jt,section:ze,setsection:Ge,status:Ke,setstatus:Pe,dormitory:We,campus:ht,setcampus:mt,setdormitory:Xe,schoolarship:et,setschoolarship:tt,feesCategory:ot,setfeesCategory:it,lastSchool:ct,setlastSchool:rt,reasonforTransfer:St,setreasonforTransfer:gt}),Object(g.jsx)("br",{className:"my-5"}),Object(g.jsx)(d.a,{register:Ne,errors:Ie,mobilenumber:Dt,setmobilenumber:Nt,residence:Bt,setresidence:kt,settelephone:Ut,telephone:_t,setpostalAddress:Rt,postalAddress:Ft}),Object(g.jsx)("br",{className:"my-5"}),Object(g.jsx)(b.a,{guadian:Mt,setguadian:Tt}),Object(g.jsx)("div",{className:"row",children:Mt&&Mt.map((function(e,t){return Object(g.jsx)("div",{className:"col-xs-12 col-sm-6",children:Object(g.jsx)(p.a,{guadian:e,handleDeleteGuadian:Gt},t)})}))}),Object(g.jsxs)("div",{className:"row ",children:[Object(g.jsx)("button",{type:"submit",disabled:xe,onClick:we(zt),className:" col btn orange__btn mr-5",children:xe?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(g.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):"Save Changes"}),Object(g.jsx)("button",{onClick:function(e){e.preventDefault(),Ce(!0),Pe(""),Le(""),Ge(""),Xe(""),tt(""),it(""),Ee(""),ue(""),Tt([]),gt(""),Ut(""),jt(""),Rt(""),kt(""),Nt(""),rt(""),le(""),se(),f(""),mt(""),k(""),N(""),U(""),R(""),T(""),q(""),V(""),$("")},className:" col btn blue__btn mr-5",children:"Reset"})]})]})})]})}}}]);
//# sourceMappingURL=183.87673089.chunk.js.map