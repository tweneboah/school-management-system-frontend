{"version":3,"sources":["AdminComponents/students/newStudent/NewStudent.js"],"names":["NewStudent","useState","name","setname","lastname","setlastname","secondName","setsecondName","gender","setgender","dateofBirth","setdateofBirth","email","setemail","nationality","setnationality","placeofBirth","setplaceofBirth","religion","setreligion","health","sethealth","allege","setallege","disease","setdisease","loading","setloading","useDispatch","profileUrl","setprofileUrl","profileimg","setprofileimg","useForm","register","handleSubmit","errors","autoID","setautoID","userID","setuserID","classID","setclass","section","setsection","campus","setcampus","status","setstatus","dormitory","setdormitory","schoolarship","setschoolarship","feesCategory","setfeesCategory","lastSchool","setlastSchool","division","setdivision","reasonforTransfer","setreasonforTransfer","mobilenumber","setmobilenumber","residence","setresidence","telephone","settelephone","postalAddress","setpostalAddress","guadian","setguadian","handleDeleteGuadian","id","filter","e","handleReset","handleCreateSubmit","a","fileData","FormData","append","axios","post","path","data","middleName","surname","placeOfBirth","dormitoryID","campusID","scholarship","fees","school","reason","physicalAddress","then","response","error","errorAlert","activity","user","successAlert","student","catch","err","console","log","className","selected","target","files","size","fileReader","FileReader","readAsDataURL","onloadend","result","healthCon","setHealthCon","setDisease","allerge","setallerge","map","i","disabled","type","onClick","role","aria-hidden","preventDefault"],"mappings":"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","file":"static/js/184.660ea811.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport PersonalInfo from \"../../shared/Personalnfo\";\nimport Academics from \"./AcademicsDetails\";\nimport ContactDetails from \"../../shared/Contact\";\nimport ProfilePicture from \"../../shared/ProfilePicture\";\nimport Guadian from \"../../shared/Guadian\";\nimport { useForm } from \"react-hook-form\";\nimport GuadianCard from \"../../shared/GuadianCard\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport { update } from \"../../../store/slices/userSlice\";\nimport { useDispatch } from \"react-redux\";\n\nfunction NewStudent() {\n  //personal\n  const [name, setname] = useState(\"\");\n  const [lastname, setlastname] = useState(\"\");\n  const [secondName, setsecondName] = useState(\"\");\n  const [gender, setgender] = useState(\"\");\n  const [dateofBirth, setdateofBirth] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [nationality, setnationality] = useState(\"\");\n  const [placeofBirth, setplaceofBirth] = useState(\"\");\n  const [religion, setreligion] = useState(\"\");\n  const [health, sethealth] = useState(\"\");\n  const [allege, setallege] = useState(\"\");\n  const [disease, setdisease] = useState(\"\");\n  const [loading, setloading] = useState(\"\");\n  const dispatch = useDispatch();\n\n  const [profileUrl, setprofileUrl] = useState(\"\");\n  const [profileimg, setprofileimg] = useState(\"\");\n\n  //form verification\n  const { register, handleSubmit, errors } = useForm();\n\n  //academics\n  const [autoID, setautoID] = useState(true);\n  const [userID, setuserID] = useState(\"\");\n  const [classID, setclass] = useState(\"\");\n  const [section, setsection] = useState(\"\");\n  const [campus, setcampus] = useState(\"\");\n  const [status, setstatus] = useState(null);\n  const [dormitory, setdormitory] = useState(\"\");\n  const [schoolarship, setschoolarship] = useState(\"\");\n  const [feesCategory, setfeesCategory] = useState(\"\");\n  const [lastSchool, setlastSchool] = useState(\"\");\n  const [division, setdivision] = useState(\"\");\n  const [reasonforTransfer, setreasonforTransfer] = useState(\"\");\n\n  //contact details\n  const [mobilenumber, setmobilenumber] = useState(\"\");\n  const [residence, setresidence] = useState(\"\");\n  const [telephone, settelephone] = useState(\"\");\n  const [postalAddress, setpostalAddress] = useState(\"\");\n\n  //guidan\n  const [guadian, setguadian] = useState([]);\n\n  const handleDeleteGuadian = (id) => {\n    setguadian(guadian.filter((e) => e.id !== id));\n  };\n\n  const handleChangeFile = (e) => {\n    const selected = e.target.files[0];\n    if (selected?.size > 2000000) {\n      errorAlert(\"image is too large\");\n    } else if (selected) {\n      setprofileUrl(selected);\n      // setprofileimg(URL.createObjectURL(selected));\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(selected);\n      fileReader.onloadend = () => {\n        setprofileimg(fileReader.result);\n      };\n    } else {\n      console.log(\"no file selected\");\n    }\n  };\n\n  const handleReset = () => {\n    setautoID(true);\n    setstatus(\"\");\n    setclass(\"\");\n    setsection(\"\");\n    setdormitory(\"\");\n    setschoolarship(\"\");\n    setfeesCategory(\"\");\n    setuserID(\"\");\n    setdisease(\"\");\n    setguadian([]);\n    setreasonforTransfer(\"\");\n    settelephone(\"\");\n    setpostalAddress(\"\");\n    setresidence(\"\");\n    setmobilenumber(\"\");\n    setlastSchool(\"\");\n    setallege(\"\");\n    sethealth();\n    setdivision(\"\");\n    setcampus(\"\");\n    setname(\"\");\n    setsecondName(\"\");\n    setlastname(\"\");\n    setgender(\"\");\n    setdateofBirth(\"\");\n    setemail(\"\");\n    setnationality(\"\");\n    setplaceofBirth(\"\");\n    setreligion(\"\");\n  };\n\n  const handleCreateSubmit = async () => {\n    setloading(true);\n    const fileData = new FormData();\n    fileData.append(\"photo\", profileUrl);\n    var path;\n    if (profileUrl) {\n      path = await axios.post(\"/upload\", fileData, {});\n      // dispatch(\n      //   update({\n      //     photoUrl: path?.data?.path,\n      //   })\n      // );\n    }\n    await axios\n      .post(\"/students/create\", {\n        profileUrl: path?.data?.path,\n        name,\n        setuserID: autoID ? null : userID,\n        middleName: secondName,\n        surname: lastname,\n        gender,\n        dateofBirth,\n        email,\n        nationality,\n        religion,\n        placeOfBirth: placeofBirth,\n        health,\n        disease,\n        allege,\n        classID,\n        division,\n        dormitoryID: dormitory,\n        section,\n        status,\n        campusID: campus,\n        scholarship: schoolarship,\n        fees: feesCategory,\n        lastSchool: {\n          school: lastSchool,\n          reason: reasonforTransfer,\n        },\n        mobilenumber,\n        telephone,\n        postalAddress,\n        physicalAddress: residence,\n        guadian,\n      })\n      .then(async (response) => {\n        setloading(false);\n        if (response.data.error) {\n          errorAlert(response.data.error);\n          return 0;\n        }\n        await axios.post(\"/activitylog/create\", {\n          activity: `student  ${name} ${lastname} was created`,\n          user: \"admin\",\n        });\n        successAlert(\n          `stundent ${response.data.student.userID} successfully added`\n        );\n        handleReset();\n      })\n      .catch((err) => {\n        setloading(false);\n        console.log(err);\n        errorAlert(\"something went wrong\");\n      });\n  };\n\n  return (\n    <div>\n      <h2>Add New Students</h2>\n      <div>\n        <form className=\"content__container\">\n          <ProfilePicture\n            profileimg={profileimg}\n            profileUrl={profileUrl}\n            setprofileUrl={handleChangeFile}\n          />\n          <br className=\"my-5\" />\n          <PersonalInfo\n            register={register}\n            errors={errors}\n            name={name}\n            setname={setname}\n            secondName={secondName}\n            setsecondName={setsecondName}\n            lastname={lastname}\n            setlastname={setlastname}\n            gender={gender}\n            setgender={setgender}\n            dateofBirth={dateofBirth}\n            setdateofBirth={setdateofBirth}\n            email={email}\n            setemail={setemail}\n            nationality={nationality}\n            setnationality={setnationality}\n            placeofBirth={placeofBirth}\n            setplaceofBirth={setplaceofBirth}\n            religion={religion}\n            setreligion={setreligion}\n            healthCon={health}\n            setHealthCon={sethealth}\n            disease={disease}\n            setDisease={setdisease}\n            allerge={allege}\n            setallerge={setallege}\n          />\n          <br className=\"my-5\" />\n          <Academics\n            register={register}\n            errors={errors}\n            autoID={autoID}\n            setautoID={setautoID}\n            userID={userID}\n            setuserID={setuserID}\n            classID={classID}\n            setclass={setclass}\n            division={division}\n            setdivision={setdivision}\n            section={section}\n            setsection={setsection}\n            status={status}\n            setstatus={setstatus}\n            dormitory={dormitory}\n            setdormitory={setdormitory}\n            schoolarship={schoolarship}\n            setschoolarship={setschoolarship}\n            feesCategory={feesCategory}\n            setfeesCategory={setfeesCategory}\n            lastSchool={lastSchool}\n            campus={campus}\n            setcampus={setcampus}\n            setlastSchool={setlastSchool}\n            reasonforTransfer={reasonforTransfer}\n            setreasonforTransfer={setreasonforTransfer}\n          />\n          <br className=\"my-5\" />\n          <ContactDetails\n            register={register}\n            errors={errors}\n            mobilenumber={mobilenumber}\n            setmobilenumber={setmobilenumber}\n            residence={residence}\n            setresidence={setresidence}\n            settelephone={settelephone}\n            telephone={telephone}\n            setpostalAddress={setpostalAddress}\n            postalAddress={postalAddress}\n          />\n          <br className=\"my-5\" />\n          <Guadian guadian={guadian} setguadian={setguadian} />\n          <div className=\"row\">\n            {guadian &&\n              guadian.map((e, i) => (\n                <div className=\"col-xs-12 col-sm-6\">\n                  <GuadianCard\n                    guadian={e}\n                    key={i}\n                    handleDeleteGuadian={handleDeleteGuadian}\n                  />\n                </div>\n              ))}\n          </div>\n          <br className=\"my-5\" />\n          <div className=\"row \">\n            <button\n              disabled={loading}\n              type=\"submit\"\n              onClick={handleSubmit(handleCreateSubmit)}\n              className=\"col btn orange__btn mr-5\"\n            >\n              {loading ? (\n                <>\n                  <span\n                    className=\"spinner-border spinner-border-sm\"\n                    role=\"status\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"visually-hidden\">Loading...</span>\n                </>\n              ) : (\n                \"Create\"\n              )}\n            </button>\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                handleReset();\n              }}\n              className=\"col btn blue__btn\"\n            >\n              Reset\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default NewStudent;\n"],"sourceRoot":""}