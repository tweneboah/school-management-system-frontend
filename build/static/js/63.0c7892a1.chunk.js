(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[63],{1189:function(e,t,s){"use strict";var c=s(719),a=s(1),n=s(747),l=s(38),r=s(14);t.a=function(e){var t=Object(n.a)(),s=t.register,o=t.handleSubmit,i=t.errors,d=Object(a.useState)([]),b=Object(c.a)(d,2),j=b[0],u=b[1],h=Object(a.useState)([]),f=Object(c.a)(h,2),m=f[0],O=f[1];Object(a.useEffect)((function(){l.a.get("/classes").then((function(e){console.log(e.data),u(e.data)}))}),[]),Object(a.useEffect)((function(){l.a.get("/courses").then((function(e){console.log(e.data),O(e.data)}))}),[]);var p=e.classID,x=e.setclass,v=e.subject,g=e.setsubject,N=e.topic,C=e.settopic,S=e.loading,w=e.handleAdd,k=e.handleReset,y=e.isEdit,D=e.role,_=e.setfile,I=e.notes,A=e.setnotes;return Object(r.jsxs)("form",{className:"row g-3",action:"",children:["admin"===D&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("label",{className:"form-label",children:"Select Class"}),Object(r.jsxs)("select",{value:p,onChange:function(e){return x(e.target.value)},name:"class",className:"form-select",children:[Object(r.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),j.length>0?j.map((function(e){return Object(r.jsx)("option",{value:e.classCode,children:e.name},e.classCode)})):Object(r.jsx)("option",{disabled:!0,children:"No classes available yet"})]})]}),Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("label",{className:"form-label",children:"Select Subject"}),Object(r.jsxs)("select",{value:v,onChange:function(e){return g(e.target.value)},name:"class",className:"form-select",children:[Object(r.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),m.length>0?m.map((function(e){return Object(r.jsx)("option",{value:e.code,children:e.name},e.code)})):Object(r.jsx)("option",{disabled:!0,children:"No courses available yet"})]})]})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Topic"}),Object(r.jsx)("input",{value:N,ref:s({required:!0}),onChange:function(e){return C(e.target.value)},type:"text",className:"form-control",name:"topic"}),i.topic&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Notes"}),Object(r.jsx)("textarea",{value:I,onChange:function(e){return A(e.target.value)},rows:5,className:"form-control",id:"topic"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Upload file"}),Object(r.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.doc,.docx,.pdf, .zip",ref:s({required:!0}),onChange:function(e){return _(e)},className:"form-control",name:"file"}),i.file&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"Please select file"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsxs)("button",{onClick:o(w),className:"btn blue__btn mr-3",children:[S&&Object(r.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),y?"Save Changes":"Add"]}),Object(r.jsx)("button",{onClick:o(k),className:"btn orange__btn",children:"Reset"})]})]})}},1811:function(e,t,s){"use strict";s.r(t);var c=s(737),a=s.n(c),n=s(738),l=s(719),r=s(1),o=s(1189),i=s(38),d=s(721),b=s(79),j=s(60),u=s(22),h=s(14);t.default=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),s=t[0],c=t[1],f=Object(r.useState)(""),m=Object(l.a)(f,2),O=m[0],p=m[1],x=Object(r.useState)(""),v=Object(l.a)(x,2),g=v[0],N=v[1],C=Object(b.c)(j.d),S=Object(r.useState)(!1),w=Object(l.a)(S,2),k=w[0],y=w[1],D=Object(u.i)(),_=D.id,I=D.classID,A=function(){var e=Object(n.a)(a.a.mark((function e(){var t,c,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=" ",g){e.next=3;break}return e.abrupt("return",Object(d.c)("Please select file"));case 3:return y(!0),(c=new FormData).append("photo",g),e.next=8,i.a.post("/upload",c,{});case 8:if(!(n=e.sent).error){e.next=11;break}return e.abrupt("return",Object(d.c)("The file is too big"));case 11:return t=null===n||void 0===n?void 0:n.path,e.next=14,i.a.post("/notes/create",{topic:s,courseID:_,classID:I,notes:O,file:t,senderID:null===C||void 0===C?void 0:C.id}).then((function(e){if(e.data.error)return Object(d.c)(e.data.error),y(!1),0;Object(d.m)("notes successfully added"),y(!1),F()})).catch((function(e){console.log(e),y(!1),Object(d.c)("File is too big")}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){c(""),p(""),N("")};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"content__container mb-5",children:[Object(h.jsx)("h3",{children:"Add New Notes"}),Object(h.jsx)(o.a,{topic:s,settopic:c,file:g,loading:k,handleReset:F,setfile:function(e){var t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)return Object(d.c)("image is too large");N(t)},role:null===C||void 0===C?void 0:C.role,handleAdd:A,notes:O,setnotes:p})]})})}}}]);
//# sourceMappingURL=63.0c7892a1.chunk.js.map