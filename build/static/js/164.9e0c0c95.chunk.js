(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[164],{1927:function(e,t,n){"use strict";n.r(t);var s=n(719),a=n(1),c=n(927),r=n(38),o=n(721),i=n(79),l=n(60);function d(e,t,n,s){var a,c=!1,r=0;function o(){a&&clearTimeout(a)}function i(){for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];var u=this,j=Date.now()-r;function b(){r=Date.now(),n.apply(u,l)}function m(){a=void 0}c||(s&&!a&&b(),o(),void 0===s&&j>e?b():!0!==t&&(a=setTimeout(s?m:b,void 0===s?e-j:e)))}return"boolean"!==typeof t&&(s=n,n=t,t=void 0),i.cancel=function(){o(),c=!0},i}var u=n(14);t.default=function(){var e,t,n,j=Object(a.useState)(""),b=Object(s.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)([]),f=Object(s.a)(O,2),v=f[0],p=f[1],x=Object(a.useState)(""),N=Object(s.a)(x,2),g=N[0],S=N[1],_=Object(i.c)(l.d),w=Object(a.useState)([]),y=Object(s.a)(w,2),D=y[0],C=y[1],k=Object(a.useState)(""),I=Object(s.a)(k,2),T=I[0],F=I[1],J=Object(a.useState)("Guadian"),q=Object(s.a)(J,2),A=q[0],G=(q[1],function(){T&&r.a.get("/students/search/".concat(T)).then((function(e){if(e.data.error)return Object(o.c)(e.data.error),0;C(e.data.users.map((function(e){return{_id:e._id,userID:e.userID,name:e.name,surname:e.surname}})))}))}),M=(e=500,t=G,void 0===n?d(e,t,!1):d(e,n,!1!==t));return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"mb-5 content__container row",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),G()},className:"mb-5 col-12 ",children:[Object(u.jsx)("label",{className:"form-label",children:"Search for Student by Name or ID"}),Object(u.jsxs)("div",{className:"d-flex flex-row",children:[Object(u.jsx)("input",{value:T,onChange:function(e){F(e.target.value),M(e.target.value)},className:"form-control",type:"text",placeholder:"Type here..."}),Object(u.jsx)("button",{className:"btn blue__btn",children:"Search"})]}),Object(u.jsx)("ul",{className:"students__container",children:D.length>0?Object(u.jsx)(u.Fragment,{children:D.map((function(e){return Object(u.jsxs)("li",{onClick:function(){return t=e._id,void r.a.get("/students/parents/".concat(t)).then((function(e){if(console.log(e.data),e.data.error)return Object(o.c)(e.data.error),0;p(e.data.docs)}));var t},className:"option",children:[e.name," ",e.surname," ",e.userID," "]},e._id)}))}):Object(u.jsx)("li",{children:"No results found"})})]})}),v.length>0&&Object(u.jsx)(c.a,{message:m,setmessage:h,onSend:function(e){if(e.preventDefault(),m&&g){var t=v.find((function(e){return e.id===g}));if(!(null===t||void 0===t?void 0:t.mobile))return Object(o.c)("Parent does not have phone number");r.a.post("/chats",{message:m,userID:g,telephone:null===t||void 0===t?void 0:t.mobile,sender:null===_||void 0===_?void 0:_.id}).then((function(e){if(e.data.error)return Object(o.c)(e.data.error),0;Object(o.m)("message send"),h("")}))}},searchOptions:function(){return v.map((function(e){return Object(u.jsxs)("option",{value:e.id,children:[e.name," ",e.surname," ",e.relationship," "]},e.id)}))},recipient:g,setrecipient:S,sender:null===_||void 0===_?void 0:_.id,sendto:A})]})}},927:function(e,t,n){"use strict";n(1);var s=n(14);t.a=function(e){var t=e.message,n=e.setmessage,a=e.onSend,c=e.recipient,r=e.setrecipient,o=e.sender,i=e.sendto,l=e.searchOptions,d=e.loading,u=e.error;return Object(s.jsxs)("form",{action:"",className:" content__container form__sender",children:[Object(s.jsx)("div",{className:"header",children:Object(s.jsxs)("h3",{children:["Send Message to ",i]})}),Object(s.jsxs)("div",{className:"row mb-2 px-3",children:[Object(s.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Recipient:"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsxs)("select",{value:c,onChange:function(e){return r(e.target.value)},id:"inputState",className:"form-select",children:[Object(s.jsx)("option",{defaultChecked:!0,hidden:!0,children:"Choose..."}),l?l():Object(s.jsx)("option",{disabled:!0,children:"No options"})]})})]}),Object(s.jsxs)("div",{className:"row mb-2 px-3",children:[Object(s.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Sender:"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsx)("input",{className:"form-control",value:o,type:"text",readOnly:!0})})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("div",{className:"col-12",children:Object(s.jsx)("textarea",{value:t,onChange:function(e){return n(e.target.value)},className:"form-control",name:"",rows:"10",required:!0,placeholder:"Type here"})}),u&&Object(s.jsx)("div",{className:"text-danger text-center mb-2",children:u}),Object(s.jsx)("div",{className:"col-12",children:Object(s.jsxs)("button",{disabled:d,onClick:a,className:"btn blue__btn w-100",children:[d&&Object(s.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Send"]})})]})]})}}}]);
//# sourceMappingURL=164.9e0c0c95.chunk.js.map