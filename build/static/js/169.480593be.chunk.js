(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[169],{1929:function(e,t,c){"use strict";c.r(t);var a=c(770),n=c(716),i=c(1),s=c(946),l=c(14);var r=function(e){var t=e.openEdit,c=e.setopenEdit,a=e.notices,n=e.searchDate,i=e.handleSearch,r=e.handleReset,d=e.setsearchDate,o=e.searchTitle,j=e.setsearchTitle,b=e.editData,u=e.handleDelete;return Object(l.jsxs)("div",{className:"content__container",children:[Object(l.jsx)("h3",{children:"Notice Board"}),Object(l.jsxs)("form",{action:"",className:"row",children:[Object(l.jsx)("div",{className:"col-sm-4 mb-3",children:Object(l.jsx)("input",{type:"text",value:n,onChange:function(e){return d(e.target.value)},placeholder:"Search by Date",className:"form-control"})}),Object(l.jsx)("div",{className:"col-sm-4 mb-3",children:Object(l.jsx)("input",{type:"text",value:o,onChange:function(e){return j(e.target.value)},placeholder:"Search by Title",className:"form-control"})}),Object(l.jsxs)("div",{className:"col-sm-3 d-flex justify-content-between",children:[Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:i,className:"btn blue__btn",children:"Search"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:r,className:"btn orange__btn",children:"Reset"})})]})]}),Object(l.jsx)("div",{className:"notice__container my-5",children:(null===a||void 0===a?void 0:a.length)>0?null===a||void 0===a?void 0:a.map((function(e){return Object(l.jsxs)("div",{className:"py-3",children:[Object(l.jsx)(s.a,{description:e.description,open:t,isEdit:!0,setOpen:c,date:e.date,id:e._id,createdAt:e.createdAt,title:e.title,createdBy:e.createdBy,editData:b,handleDelete:u}),Object(l.jsx)("hr",{})]},e._id)})):Object(l.jsx)("h4",{children:"No Notice yet"})})]})},d=c(745);var o=function(e){var t=e.date,c=e.setdate,a=e.title,n=e.settitle,i=e.handleCreate,s=e.loading,r=e.createdby,o=e.setcreatedby,j=e.description,b=e.setdescription,u=Object(d.a)(),h=u.register,O=u.handleSubmit,m=u.errors;return Object(l.jsxs)("div",{className:"content__container mb-5",children:[Object(l.jsx)("h3",{children:"Create A Notice"}),Object(l.jsxs)("form",{className:"row",action:"",children:[Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Title"}),Object(l.jsx)("input",{type:"text",ref:h({required:!0}),value:a,onChange:function(e){return n(e.target.value)},className:"form-control py-4",name:"title"}),m.title&&Object(l.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Date"}),Object(l.jsx)("input",{type:"date",value:t,ref:h({required:!0}),onChange:function(e){return c(e.target.value)},className:"form-control py-4",name:"date"}),m.date&&Object(l.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Description"}),Object(l.jsx)("textarea",{value:j,onChange:function(e){return b(e.target.value)},rows:5,className:"form-control",name:"description"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Created By"}),Object(l.jsx)("input",{type:"text",ref:h({required:!0}),value:r,onChange:function(e){return o(e.target.value)},className:"form-control  py-4",name:"createdby"})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-2",children:Object(l.jsx)("button",{disabled:s,onClick:O(i),className:"btn blue__btn",children:"Create"})}),Object(l.jsx)("div",{className:"col-2",children:Object(l.jsx)("button",{disabled:s,onClick:function(e){e.preventDefault(),c(""),n(""),o(""),b("")},className:"btn btn-danger",children:"Cancel"})})]})]})]})},j=c(38),b=(c(32),c(718));t.default=function(){var e=Object(i.useState)([]),t=Object(n.a)(e,2),c=t[0],s=t[1],d=Object(i.useState)([]),u=Object(n.a)(d,2),h=u[0],O=u[1],m=Object(i.useState)(""),f=Object(n.a)(m,2),v=f[0],x=f[1],p=Object(i.useState)(""),N=Object(n.a)(p,2),g=N[0],y=N[1],C=Object(i.useState)(""),D=Object(n.a)(C,2),S=D[0],_=D[1],w=Object(i.useState)(""),T=Object(n.a)(w,2),k=T[0],B=T[1],q=Object(i.useState)(""),E=Object(n.a)(q,2),M=E[0],Y=E[1],A=Object(i.useState)(""),F=Object(n.a)(A,2),L=F[0],I=F[1],R=Object(i.useState)(""),z=Object(n.a)(R,2),J=z[0],W=z[1],G=Object(i.useState)(!1),H=Object(n.a)(G,2),K=H[0],P=H[1],Q=Object(i.useState)(""),U=Object(n.a)(Q,2),V=U[0],X=U[1],Z=Object(i.useState)(""),$=Object(n.a)(Z,2),ee=$[0],te=$[1],ce=Object(i.useState)(""),ae=Object(n.a)(ce,2),ne=ae[0],ie=ae[1],se=Object(i.useState)(""),le=Object(n.a)(se,2),re=le[0],de=le[1],oe=Object(i.useState)(!1),je=Object(n.a)(oe,2),be=je[0],ue=je[1],he=Object(i.useState)(""),Oe=Object(n.a)(he,2),me=Oe[0],fe=Oe[1];Object(i.useEffect)((function(){j.a.get("/notification").then((function(e){s(e.data),console.log(e.data),O(e.data)}))}),[]);var ve={date:ne,setdate:ie,loading:be,handleCreate:function(){ue(!0),j.a.put("/notification/update/".concat(me),{title:V,date:ne,createdBy:re,description:ee}).then((function(e){if(ue(!1),e.data.error)return Object(b.c)(e.data.error),0;Object(b.m)("Notice successfully edited"),X(""),ie(""),de(""),te(""),P(!1);var t=c.filter((function(e){return e._id!==me}));s([e.data.doc].concat(Object(a.a)(t)))})).catch((function(e){console.log(e),ue(!1),Object(b.c)("Failed to create")}))},title:V,settitle:X,description:ee,setdescription:te,createdby:re,setcreatedby:de,seteditID:fe};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"mb-3",children:"Notice Board"}),Object(l.jsx)(o,{date:g,setdate:y,loading:M,handleCreate:function(){Y(!0),j.a.post("/notification/create",{title:v,date:g,createdBy:S,description:k}).then((function(e){if(Y(!1),e.data.error)return Object(b.c)(e.data.error),0;Object(b.m)("Notice created"),x(""),y(""),_(""),B(""),s([e.data.doc].concat(Object(a.a)(c)))})).catch((function(e){console.log(e),Y(!1),Object(b.c)("Failed to create")}))},title:v,settitle:x,description:k,setdescription:B,createdby:S,setcreatedby:_}),Object(l.jsx)("div",{id:"notifications",children:Object(l.jsx)(r,{searchDate:L,openEdit:K,handleReset:function(e){e.preventDefault(),W(""),I(""),s(h)},setopenEdit:P,handleSearch:function(e){if(e.preventDefault(),v||g){var t=[];v&&(t=h.filter((function(e){return e.title.toLowerCase().includes(J.toLowerCase())||e.description.toLowerCase().includes(J.toLowerCase())}))),g&&(t=h.filter((function(e){return new Date(e.createdAt).toISOString().slice(0,10)===g}))),s(t)}else s(h)},setsearchDate:I,searchTitle:J,setsearchTitle:W,notices:c,handleDelete:function(e){e.preventDefault(),j.a.delete("/notification/delete/".concat(me)).then((function(e){if(e.data.error)return Object(b.c)(e.data.error),0;s(c.filter((function(e){return e._id!==me}))),Object(b.m)("Notice deleted")})).catch((function(e){Object(b.c)("Failed to delete")}))},editData:ve})})]})}},946:function(e,t,c){"use strict";c(1);var a=c(721),n=c.n(a),i=c(1967),s=c(1807),l=c(1129),r=c.n(l),d=c(77),o=c(750),j=c(101),b=c(796),u=c(847),h=c(848),O=c(744),m=c.n(O),f=c(1522),v=c(745),x=c(14),p=Object(j.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,c=e.classes,a=e.onClose,n=Object(o.a)(e,["children","classes","onClose"]);return Object(x.jsxs)(u.a,Object(d.a)(Object(d.a)({disableTypography:!0,className:c.root},n),{},{children:[Object(x.jsx)(f.a,{variant:"h6",children:t}),a?Object(x.jsx)(s.a,{"aria-label":"close",className:c.closeButton,onClick:a,children:Object(x.jsx)(m.a,{})}):null]}))})),N=Object(j.a)((function(e){return{root:{padding:e.spacing(2)}}}))(h.a);function g(e){var t=e.open,c=e.setOpen,a=e.handleDelete,i=e.editData,s=Object(v.a)(),l=s.register,r=s.handleSubmit,d=s.errors,o=function(){c(!1)};return Object(x.jsx)("div",{children:Object(x.jsxs)(b.a,{onClose:o,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(x.jsx)(p,{id:"customized-dialog-title",onClose:o,children:"Edit Notice"}),Object(x.jsx)(N,{dividers:!0,children:Object(x.jsxs)("form",{className:"row",action:"",children:[Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Title"}),Object(x.jsx)("input",{type:"text",ref:l({required:!0}),value:null===i||void 0===i?void 0:i.title,onChange:function(e){return null===i||void 0===i?void 0:i.settitle(e.target.value)},className:"form-control py-4",name:"title"}),d.title&&Object(x.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Date"}),Object(x.jsx)("input",{type:"date",value:n()(null===i||void 0===i?void 0:i.date).format("YYYY-MM-D"),ref:l({required:!0}),onChange:function(e){return null===i||void 0===i?void 0:i.setdate(e.target.value)},className:"form-control py-4",name:"date"}),d.date&&Object(x.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(x.jsxs)("div",{className:"col-md-12 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Description"}),Object(x.jsx)("textarea",{value:null===i||void 0===i?void 0:i.description,onChange:function(e){return null===i||void 0===i?void 0:i.setdescription(e.target.value)},rows:5,className:"form-control",name:"description"})]}),Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Created By"}),Object(x.jsx)("input",{type:"text",ref:l({required:!0}),value:null===i||void 0===i?void 0:i.createdby,onChange:function(e){return null===i||void 0===i?void 0:i.setcreatedby(e.target.value)},className:"form-control  py-4",name:"createdby"})]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("button",{disabled:null===i||void 0===i?void 0:i.loading,onClick:r(null===i||void 0===i?void 0:i.handleCreate),className:"btn blue__btn",children:"Save Changes"})}),Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("button",{onClick:a,className:"btn btn-danger",children:"Delete"})})]})]})})]})})}t.a=function(e){var t=e.description,c=e.createdBy,a=e.date,l=e.title,d=e.createdAt,o=e.isEdit,j=e.id,b=e.open,u=e.setOpen,h=e.editData,O=e.handleDelete,m=["#2ad7c5","#ffa201","#f939a1"],f=m[Math.floor(Math.random()*m.length)];return Object(x.jsxs)("div",{className:"notice d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:Object(x.jsx)("strong",{children:l})}),Object(x.jsx)(i.a,{style:{backgroundColor:"".concat(f)},className:"chip__date mb-2",label:n()(a).format(" Do MMMM, YYYY")}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",t," "]})}),Object(x.jsx)("div",{children:Object(x.jsxs)("h6",{children:[c," /"," ",Object(x.jsxs)("span",{className:"text-muted",children:[" ",n()(d).fromNow()]})]})})]}),o&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsx)(s.a,{onClick:function(){return u(!0),null===h||void 0===h||h.setdate(a),null===h||void 0===h||h.settitle(l),null===h||void 0===h||h.setcreatedby(c),null===h||void 0===h||h.setdescription(t),void(null===h||void 0===h||h.seteditID(j))},children:Object(x.jsx)(r.a,{})})}),Object(x.jsx)(g,{editData:h,open:b,handleDelete:O,setOpen:u})]})]})}}}]);
//# sourceMappingURL=169.480593be.chunk.js.map