(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[19],{1091:function(e,t,c){"use strict";c(1);var n=c(135),a=c(14);t.a=function(){return Object(a.jsxs)("div",{className:"d-flex xs-flex-column sm-flex-row justify-content-end",children:[Object(a.jsx)(n.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/members/register",children:"Add  Canteen Member "}),Object(a.jsx)(n.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/members",children:"All Members"}),Object(a.jsx)(n.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments/plan",children:"Payments Plan"}),Object(a.jsx)(n.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments/add",children:"Make Payment"}),Object(a.jsx)(n.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments",children:"All Payments"})]})}},1942:function(e,t,c){"use strict";c.r(t);var n=c(716),a=c(1),s=c(748),l=c(14);var r=function(e){var t=Object(s.a)(),c=t.register,n=t.handleSubmit,a=t.errors,r=e.studentID,d=e.setstudentID,i=e.planPrice,o=e.amount,j=e.setamount,b=e.handleAdd,m=e.loading;return Object(l.jsxs)("form",{action:"",className:"row g-3",children:[Object(l.jsxs)("div",{className:"col-md-10",children:[Object(l.jsx)("label",{className:"form-label",children:"Canteen Member ID"}),Object(l.jsx)("input",{value:r,ref:c({required:!0}),onChange:function(e){return d(e.target.value)},type:"text",className:"form-control",name:"userID"}),a.userID&&Object(l.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),i&&Object(l.jsxs)("div",{className:"col-md-10",children:[Object(l.jsx)("label",{className:"form-label",children:"Amount Paid"}),[1,2,3].map((function(e){return Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",value:i*e,type:"radio",onClick:function(e){return j(e.target.value)},name:"flexRadioDefault"}),Object(l.jsx)("label",{className:"form-check-label",children:i*e})]})})),Object(l.jsx)("input",{value:o,ref:c({required:!0}),readOnly:!0,type:"number",className:"form-control",name:"amount"}),a.amount&&Object(l.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(l.jsx)("div",{className:"col-xs-12",children:Object(l.jsxs)("button",{disabled:m,onClick:n(b),className:"btn blue__btn",children:[m&&Object(l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status"}),"Add"]})})]})},d=c(1091),i=c(1967),o=c(718),j=c(722),b=c.n(j),m=c(38);var u=function(e){var t=e.member,c=e.planName,s=Object(a.useState)({}),r=Object(n.a)(s,2),d=r[0],j=r[1];Object(a.useEffect)((function(){m.a.get("/user/".concat(null===t||void 0===t?void 0:t.userID)).then((function(e){j(e.data.user)}))}),[t]);var u=t.payments.reduce((function(e,t){return Number(e)+Number(t.amount)}),0);return Object(l.jsxs)("div",{className:" content__container",children:[Object(l.jsxs)("div",{style:{background:"#051f3e"},className:"d-flex flex-column align-items-center p-3 text-light mb-4",children:[Object(l.jsx)(i.a,{src:Object(o.g)(null===d||void 0===d?void 0:d.profileUrl),style:{width:"100px",height:"100px"}}),Object(l.jsxs)("h3",{children:[Object(o.d)(null===d||void 0===d?void 0:d.name)," ",Object(o.h)(null===d||void 0===d?void 0:d.middlename)," ",Object(o.d)(null===d||void 0===d?void 0:d.surname)," - ",null===d||void 0===d?void 0:d.userID]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("strong",{children:[null===t||void 0===t?void 0:t.role," "]})," "]}),Object(l.jsxs)("div",{children:["Canteen Membership ID: ",null===t||void 0===t?void 0:t.memberID]}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("strong",{children:["Payment Plan ",Object(l.jsx)("span",{className:"text-danger",children:c})," "]})," "]}),Object(l.jsxs)("div",{children:["Since ",b()(null===t||void 0===t?void 0:t.date).format("D MMMM  YYYY")," "]})]}),Object(l.jsxs)("table",{className:"table table-bordered",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"Date"}),Object(l.jsx)("th",{scope:"col",children:"Months Covered"}),Object(l.jsx)("th",{scope:"col",children:"Amount"})]})}),Object(l.jsxs)("tbody",{children:[(null===t||void 0===t?void 0:t.payments)&&(null===t||void 0===t?void 0:t.payments.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:b()(null===e||void 0===e?void 0:e.date).format("D MMMM  YYYY")}),Object(l.jsx)("td",{children:e.covers||"-"}),Object(l.jsxs)("td",{children:[Object(o.b)(),e.amount]})]},e._id)}))),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{colSpan:"2",children:"BALANCE"}),Object(l.jsxs)("td",{children:[Object(o.b)()," ",u]})]})]})]})]})};t.default=function(){var e=Object(a.useState)(""),t=Object(n.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)([]),j=Object(n.a)(i,2),b=j[0],O=j[1],h=Object(a.useState)({}),v=Object(n.a)(h,2),x=v[0],f=v[1],p=Object(a.useState)(""),N=Object(n.a)(p,2),y=N[0],g=N[1],D=Object(a.useState)(!1),S=Object(n.a)(D,2),M=S[0],I=S[1],C=Object(a.useState)(""),P=Object(n.a)(C,2),A=P[0],k=P[1],Y=Object(a.useState)(""),_=Object(n.a)(Y,2),w=_[0],q=_[1],E=Object(a.useState)([]),F=Object(n.a)(E,2),J=F[0],T=F[1];Object(a.useEffect)((function(){m.a.get("/canteen").then((function(e){O(e.data)}))}),[]),Object(a.useEffect)((function(){m.a.get("/paymentplan").then((function(e){var t;T(null===(t=e.data)||void 0===t?void 0:t.plans)}))}),[]);var B=function(e){var t=b.find((function(t){return t.memberID===e}));f(t);var c=J.find((function(e){return e.plan===(null===t||void 0===t?void 0:t.paymentMethod)}));k(null===c||void 0===c?void 0:c.price),q(null===c||void 0===c?void 0:c.name),s(e)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d.a,{}),Object(l.jsx)("h3",{children:"Add Canteen Payment "}),Object(l.jsxs)("div",{className:"mb-5 row",children:[Object(l.jsxs)("div",{className:"col-sm-6  content__container",children:[Object(l.jsxs)("div",{className:"mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:" Select Canteen Member"}),Object(l.jsxs)("select",{onChange:function(e){return B(e.target.value)},className:"form-select",children:[Object(l.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),(null===b||void 0===b?void 0:b.length)>0?null===b||void 0===b?void 0:b.map((function(e){return Object(l.jsxs)("option",{value:e.memberID,children:[e.name," ",e.memberID]},e.memberID)})):Object(l.jsx)("option",{disabled:!0,children:"No members yet"})]})]}),Object(l.jsx)(r,{studentID:c,setstudentID:B,handleAdd:function(){I(!0),m.a.put("/canteen/payment/".concat(c),{amount:y,covers:y/A}).then((function(e){I(!1),e.data.error&&Object(o.c)(e.data.error),Object(o.m)("Payment succefully recorded"),g(""),f(e.data.doc)})).catch((function(e){Object(o.c)("Payment Failed"),console.log(e),I(!1)}))},loading:M,planPrice:A,amount:y,setamount:g})]}),Object(l.jsx)("div",{className:"col-sm-6",children:A&&Object(l.jsx)(u,{planName:w,member:x})})]})]})}}}]);
//# sourceMappingURL=19.4886bc73.chunk.js.map