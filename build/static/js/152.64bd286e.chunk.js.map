{"version":3,"sources":["components/messages/inbox/DefaultView.js","components/messages/inbox/SidebarMessage.js","components/messages/inbox/AddUserModel.js","components/messages/inbox/Sidebar.js","components/messages/inbox/Message.js","components/messages/inbox/MessageContainer.js","StudentComponents/messages/Chat.js"],"names":["DefaultView","className","SidebarMessage","chat","currentUser","useState","user","setuser","lastmessage","setlastmessage","messages","useSelector","selectNotifications","dispatch","useDispatch","useEffect","userId","requestor_id","acceptor_id","axios","get","trim","then","res","data","profileUrl","name","surname","pop","handleOpen","id","a","put","console","log","newMessages","filter","i","type","setNotifications","onClick","_id","to","Avatar","alt","getIntial","src","getImgSrc","getCapitalize","getTrimString","timeStamp","date","message","DialogTitle","withStyles","theme","root","margin","padding","spacing","icon","width","height","closeButton","position","right","top","color","palette","grey","props","children","classes","onClose","other","disableTypography","Typography","variant","IconButton","aria-label","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","CustomizedDialogs","open","setOpen","search","setsearch","handleSearch","loadingSearch","searchResults","loading","handleSendRequest","setsearchResults","handleClose","Dialog","fullWidth","maxWidth","aria-labelledby","action","onSubmit","value","onChange","e","target","placeholder","CircularProgress","style","map","userID","Button","autoFocus","Sidebar","chats","setchats","selectUser","setloadingSearch","setloading","sort","x","y","updatedAt","preventDefault","results","catch","err","post","error","errorAlert","result","Message","senderID","MessageContainer","useParams","setmessages","setmessage","messagesEndRef","React","createRef","scrollToBottom","current","scrollIntoView","behavior","response","ref","channelID","doc","Messaging","component","path"],"mappings":"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","file":"static/js/152.64bd286e.chunk.js","sourcesContent":["import React from 'react'\n\nfunction DefaultView() {\n    return (\n        <div className=\"default__chat\">\n            <div>\n            <h1>Welcome , Admin </h1>\n            <h4>Messaging Chat system</h4>\n            </div>\n       </div>\n    )\n}\n\nexport default DefaultView\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Avatar } from \"@material-ui/core\";\nimport axios from \"../../../store/axios\";\nimport {\n  getIntial,\n  getImgSrc,\n  getCapitalize,\n  timeStamp,\n  getTrimString,\n} from \"../../../utils\";\nimport {\n  selectNotifications,\n  setNotifications,\n} from \"../../../store/slices/schoolSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nfunction SidebarMessage({ chat, currentUser }) {\n  const [user, setuser] = useState({});\n  const [lastmessage, setlastmessage] = useState({});\n  const messages = useSelector(selectNotifications);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let userId =\n      currentUser === chat?.requestor_id\n        ? chat?.acceptor_id\n        : chat?.requestor_id;\n    axios.get(`/user/${userId.trim()}`).then((res) => {\n      let data = res.data.user;\n      setuser({\n        profileUrl: data?.profileUrl,\n        name: data?.name,\n        surname: data?.surname,\n      });\n      setlastmessage(chat?.messages.pop());\n    });\n  }, [chat, currentUser]);\n\n  const handleOpen = async (id) => {\n    await axios.put(`/chats/update/chat/${id}/${currentUser}`).then((res) => {\n      console.log(res);\n      let newMessages = messages.filter((i) => i.type !== \"chat\");\n      dispatch(setNotifications(newMessages));\n    });\n  };\n\n  return (\n    <div className=\"sidemessage\">\n      <Link\n        onClick={() => handleOpen(chat?._id)}\n        to={`/messages/chat/${chat?._id}`}\n        className=\"d-flex\"\n      >\n        <div className=\"mr-2\">\n          <Avatar\n            alt={getIntial(user?.name || \"O\")}\n            src={getImgSrc(user?.profileUrl)}\n          ></Avatar>\n        </div>\n        <div>\n          <div className=\"d-flex align-center justify-content-between w-100\">\n            <h6>\n              {getCapitalize(user?.name)}{\" \"}\n              {user?.surname && getTrimString(getCapitalize(user?.surname), 5)}\n            </h6>\n            <small className=\"text-muted\">{timeStamp(lastmessage?.date)}</small>\n          </div>\n          <span>\n            {getTrimString(lastmessage?.message || \"last message...\", 20)}\n          </span>\n        </div>\n      </Link>\n    </div>\n  );\n}\n\nexport default SidebarMessage;\n","import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\nimport MuiDialogActions from \"@material-ui/core/DialogActions\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  icon: {\n    width: \"50px\",\n    height: \"50px\",\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nexport default function CustomizedDialogs({\n  open,\n  setOpen,\n  search,\n  setsearch,\n  handleSearch,\n  loadingSearch,\n  searchResults,\n  loading,\n  handleSendRequest,\n  setsearchResults,\n}) {\n  const handleClose = () => {\n    setsearch(\"\");\n    setsearchResults(\"\");\n    setOpen(false);\n  };\n\n  const handleClear = () => {\n    setsearch(\"\");\n  };\n\n  return (\n    <div>\n      <Dialog\n        fullWidth={true}\n        maxWidth=\"sm\"\n        onClose={handleClose}\n        aria-labelledby=\"customized-dialog-title\"\n        open={open}\n      >\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n          Find User\n        </DialogTitle>\n        <DialogContent>\n          <form action=\"\" onSubmit={handleSearch}>\n            <div className=\"search__user\">\n              <div>\n                <SearchIcon />\n                <input\n                  value={search}\n                  onChange={(e) => setsearch(e.target.value)}\n                  type=\"text\"\n                  placeholder=\"Search by name or userID\"\n                />\n              </div>\n              {search && !loadingSearch && <CancelIcon onClick={handleClear} />}\n              <div>\n                {loadingSearch && (\n                  <CircularProgress style={{ width: \"20px\", height: \"20px\" }} />\n                )}\n              </div>\n            </div>\n          </form>\n          <div className=\"mt-3 d-flex results__container justify-content-between align-items-start\">\n            <ul>\n              {searchResults &&\n                searchResults.map((e) => (\n                  <li>\n                    <button\n                      onClick={() => handleSendRequest(e?.userID)}\n                      className=\"btn\"\n                    >\n                      {e.name} {e.surname} - {e.userID}\n                    </button>\n                  </li>\n                ))}\n            </ul>\n            {loading && (\n              <CircularProgress style={{ width: \"20px\", height: \"20px\" }} />\n            )}\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport SidebarMessage from \"./SidebarMessage\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AddUserModel from \"./AddUserModel\";\nimport { errorAlert, successAlert } from \"src/utils\";\n\nfunction Sidebar() {\n  const [chats, setchats] = useState([]);\n  const user = useSelector(selectUser);\n  const [open, setOpen] = useState(false);\n  const [search, setsearch] = useState(\"\");\n  const [searchResults, setsearchResults] = useState(\"\");\n  const [loadingSearch, setloadingSearch] = useState(false);\n  const [loading, setloading] = useState(false);\n\n  useEffect(() => {\n    axios.get(`/chats/chats/${user?.id}`).then((res) => {\n      setchats(res.data);\n    });\n  }, [user]);\n\n  const handleSendRequest = (id) => {\n    setloading(true);\n    axios\n      .post(`/chats/create`, {\n        acceptor_id: id,\n        requestor_id: user?.userID,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          return errorAlert(res.data.error);\n        }\n        setOpen(false);\n        //successAlert(`Friend request has been successfully send to ${id}`);\n        axios.get(`/chats/chats/${user?.userID}`).then((result) => {\n          setchats(result.data);\n        });\n      })\n      .catch((err) => {\n        errorAlert(\"Faild\");\n        setloading(false);\n      });\n  };\n\n  const handleSearchUser = (e) => {\n    console.log(\"search\");\n    e.preventDefault();\n    if (search) {\n      setloadingSearch(true);\n      axios\n        .get(`/users/search/${search}`)\n        .then((res) => {\n          let results = res.data;\n          setloadingSearch(false);\n          setsearchResults(results);\n        })\n        .catch((err) => {\n          console.log(err);\n          setloading(false);\n        });\n    }\n  };\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar__header p-2 mb-2\">\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <h5>\n            <strong>Chats</strong>\n          </h5>\n          <div>\n            <button onClick={() => setOpen(true)} className=\"btn\">\n              <PersonAddIcon />\n            </button>\n          </div>\n        </div>\n      </div>\n      {/* <div className=\"sidebar__search p-2\">\n        <form action=\"\">\n          <input type=\"text\" placeholder=\"Search...\" />\n          <SearchIcon />\n        </form>\n      </div> */}\n      <div>\n        {chats &&\n          chats\n            .sort((x, y) => {\n              return x.updatedAt - y.updatedAt;\n            })\n            .map((chat) => (\n              <SidebarMessage\n                key={chat._id}\n                chat={chat}\n                currentUser={user?.id}\n              />\n            ))}\n      </div>\n      <AddUserModel\n        search={search}\n        setsearch={setsearch}\n        handleSearch={handleSearchUser}\n        open={open}\n        searchResults={searchResults}\n        setsearchResults={setsearchResults}\n        loadingSearch={loadingSearch}\n        setOpen={setOpen}\n        loading={loading}\n        handleSendRequest={handleSendRequest}\n      />\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import React from 'react'\nimport {timeStamp} from '../../../utils'\n\nfunction Message({message, currentUser}) {\n    return (\n        <div className={currentUser === message?.senderID? \"sender__mesaage message\" : \"message\"}>\n            <div className=\"message__content\">\n               {message?.message}\n            </div>\n            <div className=\"message__time \">{timeStamp(message.date)}</div>\n        </div>\n    )\n}\n\nexport default Message\n","import React, { useState, useEffect } from \"react\";\nimport Message from \"./Message\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport { Avatar } from \"@material-ui/core\";\nimport { getImgSrc, getCapitalize, getIntial } from \"../../../utils\";\n\nfunction MessageContainer() {\n  const { id } = useParams();\n  const [messages, setmessages] = useState([]);\n  const [message, setmessage] = useState(\"\");\n  const [user, setuser] = useState({});\n  const currentUser = useSelector(selectUser);\n\n  const messagesEndRef = React.createRef();\n\n  useEffect(() => {\n    scrollToBottom();\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    axios.get(`/chats/chat/${id}`).then(async (res) => {\n      setmessages(res.data?.messages);\n      let userId =\n        currentUser?.id === res.data?.requestor_id\n          ? res.data?.acceptor_id\n          : res.data?.requestor_id;\n      await axios.get(`/user/${userId}`).then((response) => {\n        setuser(response.data.user);\n      });\n    });\n  }, [id, currentUser]);\n\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    if (message) {\n      axios\n        .put(`/chats/send/${id}`, {\n          message,\n          senderID: currentUser?.id,\n          channelID: id,\n        })\n        .then((res) => {\n          console.log(res.data);\n          setmessages(res.data.doc?.messages);\n          setmessage(\"\");\n        });\n    }\n  };\n\n  return (\n    <div className=\"message__container\">\n      <div className=\"header d-flex\">\n        <Avatar\n          src={getImgSrc(user?.profileUrl)}\n          alt={getIntial(user?.name || \"U\")}\n        />\n        <div className=\"ml-3\">\n          <h6>\n            {\" \"}\n            {getCapitalize(user?.name || \"A\")} {getCapitalize(user?.surname)}\n          </h6>\n          <span>{user?.userID}</span>\n        </div>\n      </div>\n      <div className=\"message__messages p-2\">\n        {messages &&\n          messages.map((e) => (\n            <Message message={e} key={e._id} currentUser={currentUser?.id} />\n          ))}\n        <div ref={messagesEndRef} />\n      </div>\n      <form onSubmit={handleSendMessage} className=\"send\">\n        <input\n          value={message}\n          onChange={(e) => setmessage(e.target.value)}\n          type=\"text\"\n          placeholder=\"Type here ...\"\n        />\n        <button type=\"submit\" className=\"btn\">\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default MessageContainer;\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Sidebar from \"../../components/messages/inbox/Sidebar\";\nimport Message from \"../../components/messages/inbox/MessageContainer\";\nimport DefaultView from \"../../components/messages/inbox/DefaultView\";\n\nfunction Messaging() {\n  return (\n    <div>\n      <div className=\" messages__container \">\n        <Sidebar />\n        <div className=\"containing__chat\">\n          <Switch>\n            <Route component={Message} path=\"/messages/chat/:id\" />\n            <Route component={DefaultView} path=\"/messages/chat\" />\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Messaging;\n"],"sourceRoot":""}