(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[151],{1183:function(e,t,a){"use strict";var s=a(719),c=a(1),n=a(563),l=a(1071),o=a.n(l),r=a(1940),i=a(721),d=a(38),j=a(79),b=a(60),u=a(10),m=a(14),O=Object(n.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},profileIcon:{}}}));t.a=function(e){var t=e.id,a=e.profile,n=O(),l=Object(c.useState)(""),h=Object(s.a)(l,2),f=h[0],p=h[1],v=Object(c.useState)(!1),x=Object(s.a)(v,2),g=x[0],N=x[1],w=Object(j.b)();return Object(c.useEffect)((function(){p(a)}),[a]),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{accept:"image/*",onChange:function(e){var a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>2e6)Object(i.c)("image is too large");else if(a){N(!0);var s=new FormData;s.append("photo",a),d.a.post("/upload",s,{}).then((function(e){var a=e.data.path;console.log(a),d.a.post("/update/profile/".concat(t),{profileUrl:a}).then((function(e){if(N(!1),e.data.error)return Object(i.c)("Profile update failed"),0;p(a),w(Object(b.e)({photoUrl:a})),localStorage.setItem(u.a.PhotoURL,a)}))})).catch((function(e){console.log(e),N(!1),Object(i.c)("Profile update failed")}))}else console.log("no file selected"),Object(i.c)("no file selected")},className:n.input,disabled:g,id:"icon-button-file",type:"file"}),Object(m.jsxs)("label",{className:"profileContainer",htmlFor:"icon-button-file",children:[Object(m.jsx)(r.a,{src:Object(i.g)(f),className:"large__avatar","aria-label":"upload picture",component:"span",children:Object(m.jsx)(o.a,{})}),Object(m.jsx)("div",{className:"profileIcon",children:"Change Profile"})]})]})}},1187:function(e,t,a){"use strict";a(1);var s=a(22),c=a(14);t.a=function(e){var t=e.dispatch,a=e.loggout,n=e.user,l=Object(s.g)();return Object(c.jsx)("div",{className:"content__container",children:Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsxs)("h6",{children:["You are logged-in as ",null===n||void 0===n?void 0:n.id,"- ",null===n||void 0===n?void 0:n.name," ",(null===n||void 0===n?void 0:n.lastName)?null===n||void 0===n?void 0:n.lastName:""]}),Object(c.jsx)("button",{onClick:function(){t(a()),localStorage.clear(),l.push("/login")},className:"btn btn-danger",children:"Logout"})]})})}},1188:function(e,t,a){"use strict";var s=a(719),c=a(1),n=a(721),l=a(38),o=a(747),r=a(14);t.a=function(e){var t=e.id,a=Object(c.useState)(""),i=Object(s.a)(a,2),d=i[0],j=i[1],b=Object(c.useState)(""),u=Object(s.a)(b,2),m=u[0],O=u[1],h=Object(o.a)(),f=h.register,p=h.handleSubmit,v=h.errors,x=Object(c.useState)(!1),g=Object(s.a)(x,2),N=g[0],w=g[1];return Object(r.jsxs)("form",{action:"",className:"mb-5 content__container",children:[Object(r.jsx)("h4",{children:"Change Password"}),Object(r.jsxs)("div",{className:"row mb-3",children:[Object(r.jsx)("label",{className:"col-sm-3 col-form-label",children:"Old Password"}),Object(r.jsxs)("div",{className:"col-sm-9",children:[Object(r.jsx)("input",{onChange:function(e){return j(e.target.value)},ref:f({required:!0}),value:d,type:"password",className:"form-control",name:"oldpassword"}),v.oldpassword&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(r.jsxs)("div",{className:"row mb-3",children:[Object(r.jsx)("label",{className:"col-sm-3 col-form-label",children:"New Password"}),Object(r.jsxs)("div",{className:"col-sm-9",children:[Object(r.jsx)("input",{onChange:function(e){return O(e.target.value)},ref:f({required:!0}),value:m,type:"password",className:"form-control",name:"newpassword"}),v.newpassword&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(r.jsx)("div",{className:"row mb-3",children:Object(r.jsx)("div",{className:"offset-3 col-sm-9",children:Object(r.jsxs)("button",{disabled:N,type:"submit",onClick:p((function(){w(!0),l.a.post("/change/password/".concat(t),{newPassword:m,oldPassword:d}).then((function(e){if(w(!1),e.data.error)return Object(n.c)(e.data.error),0;Object(n.m)("password successfully change"),j(""),O("")})).catch((function(e){w(!1),console.log(e),Object(n.c)("Failed to change password")}))})),className:"btn blue__btn",children:[N&&Object(r.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Submit"]})})})]})}},1925:function(e,t,a){"use strict";a.r(t);var s=a(719),c=a(1),n=a(1187),l=a(1183),o=a(79),r=a(60),i=a(38),d=a(1188),j=a(747),b=a(728),u=a.n(b),m=a(721),O=a(10),h=a(80),f=a(753),p=a(103),v=a(941),x=a(825),g=a(909),N=a(917),w=a(926),C=a(1780),S=a(742),y=a.n(S),q=a(1500),_=a(14),k=Object(p.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,s=e.onClose,c=Object(f.a)(e,["children","classes","onClose"]);return Object(_.jsxs)(g.a,Object(h.a)(Object(h.a)({disableTypography:!0,className:a.root},c),{},{children:[Object(_.jsx)(q.a,{variant:"h6",children:t}),s?Object(_.jsx)(C.a,{"aria-label":"close",className:a.closeButton,onClick:s,children:Object(_.jsx)(y.a,{})}):null]}))})),P=Object(p.a)((function(e){return{root:{padding:e.spacing(2)}}}))(N.a),T=Object(p.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(w.a);function E(e){var t=e.open,a=e.setOpen,s=e.setname,c=e.name,n=e.handleEdit,l=e.loading,o=function(){a(!1)};return Object(_.jsx)("div",{children:Object(_.jsxs)(x.a,{fullWidth:!0,maxWidth:"sm",onClose:o,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(_.jsx)(k,{id:"customized-dialog-title",onClose:o,children:"Edit School Name"}),Object(_.jsx)(P,{children:Object(_.jsx)("div",{className:"row mb-3",children:Object(_.jsx)("div",{className:"col-sm-9",children:Object(_.jsx)("input",{onChange:function(e){return s(e.target.value)},value:c,type:"text",className:"form-control",name:"name"})})})}),Object(_.jsxs)(T,{children:[Object(_.jsxs)(v.a,{disabled:l,autoFocus:!0,onClick:n,color:"primary",children:[l&&Object(_.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Save changes"]}),Object(_.jsx)(v.a,{autoFocus:!0,onClick:o,color:"secondary",children:"Cancel"})]})]})})}t.default=function(){var e=Object(j.a)(),t=e.register,a=e.handleSubmit,b=e.errors,h=Object(c.useState)({}),f=Object(s.a)(h,2),p=f[0],v=f[1],x=Object(o.c)(r.d),g=Object(o.b)(),N=Object(c.useState)(""),w=Object(s.a)(N,2),C=w[0],S=w[1],y=Object(c.useState)(""),q=Object(s.a)(y,2),k=q[0],P=q[1],T=Object(c.useState)(""),F=Object(s.a)(T,2),I=F[0],D=F[1],U=Object(c.useState)(""),z=Object(s.a)(U,2),A=z[0],B=z[1],J=Object(c.useState)(""),L=Object(s.a)(J,2),M=L[0],W=L[1],R=Object(c.useState)(""),Y=Object(s.a)(R,2),G=Y[0],H=Y[1],K=Object(c.useState)(!1),Q=Object(s.a)(K,2),V=Q[0],X=Q[1],Z=Object(c.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(!1),se=Object(s.a)(ae,2),ce=se[0],ne=se[1];return Object(c.useEffect)((function(){i.a.get("/school").then((function(e){var t=null===e||void 0===e?void 0:e.data;v(t),S((null===t||void 0===t?void 0:t.name)||"Enter School Name"),D(null===t||void 0===t?void 0:t.motto),B(null===t||void 0===t?void 0:t.email),W(null===t||void 0===t?void 0:t.address),H(null===t||void 0===t?void 0:t.telephone),P(null===t||void 0===t?void 0:t.fullName)}))}),[]),Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"content__container d-flex flex-column align-items-center mb-5",children:[Object(_.jsx)(l.a,{id:null===x||void 0===x?void 0:x.userID,profile:null===x||void 0===x?void 0:x.photoUrl}),Object(_.jsxs)("h2",{children:[k," ",Object(_.jsx)("span",{children:Object(_.jsx)(u.a,{onClick:function(e){return te(!0)}})})]}),Object(_.jsxs)("form",{className:"row",children:[Object(_.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(_.jsx)("label",{className:" col-form-label",children:"Name"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("input",{onChange:function(e){return S(e.target.value)},ref:t({required:!0}),value:C,type:"text",className:"form-control",name:"name"}),b.name&&Object(_.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(_.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(_.jsx)("label",{className:" col-form-label",children:"Motto"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("input",{onChange:function(e){return D(e.target.value)},ref:t({required:!0}),value:I,type:"text",className:"form-control",name:"motto"}),b.motto&&Object(_.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(_.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(_.jsx)("label",{className:" col-form-label",children:"Email"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("input",{onChange:function(e){return B(e.target.value)},ref:t({required:!0}),value:A,type:"email",className:"form-control",name:"email"}),b.email&&Object(_.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(_.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(_.jsx)("label",{className:" col-form-label",children:"Telephone"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("input",{onChange:function(e){return H(e.target.value)},ref:t({required:!0}),value:G,type:"tel",className:"form-control",name:"telephone"}),b.telephone&&Object(_.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(_.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(_.jsx)("label",{className:" col-form-label",children:"Address"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("textarea",{rows:5,onChange:function(e){return W(e.target.value)},ref:t({required:!0}),value:M,className:"form-control",name:"address"}),b.address&&Object(_.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(_.jsxs)("div",{className:"col-sm-6 mt-5",children:[Object(_.jsxs)("button",{disabled:V,onClick:a((function(){X(!0),i.a.put("/school/update/".concat(null===p||void 0===p?void 0:p.userID),{name:C,address:M,motto:I,email:A,telephone:G}).then((function(e){if(X(!1),e.data.error)return Object(m.c)(e.data.error),0;Object(m.m)("Changes are saved"),g(Object(r.e)({name:C})),localStorage.setItem(O.a.NAME,C)})).catch((function(e){console.log(e),X(!1),Object(m.c)("Failed to save changes")}))})),className:"btn blue__btn",children:[V&&Object(_.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Save Changes"]}),Object(_.jsx)("button",{onClick:function(e){e.preventDefault(),S(null===p||void 0===p?void 0:p.name),D(null===p||void 0===p?void 0:p.motto),B(null===p||void 0===p?void 0:p.email),W(null===p||void 0===p?void 0:p.address),H(null===p||void 0===p?void 0:p.telephone)},className:"btn btn-danger ml-3",children:"Cancel"})]})]})]}),Object(_.jsx)(E,{open:ee,setOpen:te,name:k,loading:ce,setname:P,handleEdit:function(e){e.preventDefault(),ne(!0),console.log(k),i.a.put("/school/update/".concat(null===p||void 0===p?void 0:p.userID),{fullName:k}).then((function(e){if(ne(!1),e.data.error)return Object(m.c)(e.data.error),0;Object(m.m)("Changes are saved"),te(!1)})).catch((function(e){console.log(e),ne(!1),Object(m.c)("Failed to save changes")}))}}),Object(_.jsx)("div",{id:"changepassword",children:Object(_.jsx)(d.a,{id:null===x||void 0===x?void 0:x.id})}),Object(_.jsx)(n.a,{user:x,dispatch:g,loggout:r.c})]})}}}]);
//# sourceMappingURL=151.a54b73ae.chunk.js.map