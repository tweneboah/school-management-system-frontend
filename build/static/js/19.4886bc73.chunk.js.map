{"version":3,"sources":["AdminComponents/canteen/CanteenNav.js","AdminComponents/canteen/CanteenForm.js","AdminComponents/canteen/MemberPayments.js","AdminComponents/canteen/AddCanteenPayment.js"],"names":["CanteenNav","className","activeStyle","color","to","CanteenForm","props","useForm","register","handleSubmit","errors","studentID","setstudentID","planPrice","amount","setamount","handleAdd","loading","action","value","ref","required","onChange","e","target","type","name","userID","map","onClick","readOnly","disabled","role","MemberPayments","member","planName","useState","user","setuser","useEffect","axios","get","then","res","data","balance","payments","reduce","acc","Number","style","background","Avatar","src","getImgSrc","profileUrl","width","height","getCapitalize","getIntial","middlename","surname","memberID","moment","date","format","scope","covers","currentCurrency","_id","colSpan","AddCanteenPayment","members","setmembers","setmember","setloading","setplanPrice","setplanName","paymentPlan","setpaymentPlan","plans","handleSelectuser","id","selectedmember","find","price","plan","paymentMethod","defaultValue","hidden","length","put","error","errorAlert","successAlert","doc","catch","err","console","log"],"mappings":"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","file":"static/js/19.4886bc73.chunk.js","sourcesContent":["import React from 'react'\nimport {NavLink} from 'react-router-dom'\n\nfunction CanteenNav() {\n    return (\n        <div className=\"d-flex xs-flex-column sm-flex-row justify-content-end\">\n            <NavLink  activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/members/register\">Add  Canteen Member </NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/members\">All Members</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments/plan\">Payments Plan</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments/add\">Make Payment</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments\">All Payments</NavLink>\n            \n        </div>\n    )\n}\n\nexport default CanteenNav\n","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nfunction CanteenForm(props) {\n  const { register, handleSubmit, errors } = useForm();\n  let {\n    studentID,\n    setstudentID,\n    planPrice,\n    amount,\n    setamount,\n    handleAdd,\n    loading,\n  } = props;\n\n  return (\n    <form action=\"\" className=\"row g-3\">\n      <div className=\"col-md-10\">\n        <label className=\"form-label\">Canteen Member ID</label>\n        <input\n          value={studentID}\n          ref={register({ required: true })}\n          onChange={(e) => setstudentID(e.target.value)}\n          type=\"text\"\n          className=\"form-control\"\n          name=\"userID\"\n        />\n        {errors.userID && (\n          <span className=\" form-error text-danger mb-2\">\n            This field is required\n          </span>\n        )}\n      </div>\n      {planPrice && (\n        <div className=\"col-md-10\">\n          <label className=\"form-label\">Amount Paid</label>\n          {[1, 2, 3].map((e) => (\n            <div className=\"form-check\">\n              <input\n                className=\"form-check-input\"\n                value={planPrice * e}\n                type=\"radio\"\n                //checked={paymentMethod === \"weekly\"}\n                onClick={(e) => setamount(e.target.value)}\n                name=\"flexRadioDefault\"\n              />\n              <label className=\"form-check-label\">{planPrice * e}</label>\n            </div>\n          ))}\n          <input\n            value={amount}\n            ref={register({ required: true })}\n            readOnly\n            type=\"number\"\n            className=\"form-control\"\n            name=\"amount\"\n          />\n          {errors.amount && (\n            <span className=\" form-error text-danger mb-2\">\n              This field is required\n            </span>\n          )}\n        </div>\n      )}\n\n      <div className=\"col-xs-12\">\n        <button\n          disabled={loading}\n          onClick={handleSubmit(handleAdd)}\n          className=\"btn blue__btn\"\n        >\n          {loading && (\n            <span\n              className=\"spinner-border spinner-border-sm\"\n              role=\"status\"\n            ></span>\n          )}\n          Add\n        </button>\n      </div>\n    </form>\n  );\n}\n\nexport default CanteenForm;\n","import React, { useState, useEffect } from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport {\n  getImgSrc,\n  getCapitalize,\n  getIntial,\n  currentCurrency,\n} from \"../../utils\";\nimport moment from \"moment\";\nimport axios from \"../../store/axios\";\n\nfunction MemberPayments({ member, planName }) {\n  const [user, setuser] = useState({});\n\n  useEffect(() => {\n    axios.get(`/user/${member?.userID}`).then((res) => {\n      setuser(res.data.user);\n    });\n  }, [member]);\n\n  const balance = member.payments.reduce((acc, e) => {\n    return Number(acc) + Number(e.amount);\n  }, 0);\n\n  return (\n    <div className=\" content__container\">\n      <div\n        style={{ background: \"#051f3e\" }}\n        className=\"d-flex flex-column align-items-center p-3 text-light mb-4\"\n      >\n        <Avatar\n          src={getImgSrc(user?.profileUrl)}\n          style={{ width: \"100px\", height: \"100px\" }}\n        />\n        <h3>\n          {getCapitalize(user?.name)} {getIntial(user?.middlename)}{\" \"}\n          {getCapitalize(user?.surname)} - {user?.userID}\n        </h3>\n\n        <div>\n          <strong>{member?.role} </strong>{\" \"}\n        </div>\n        <div>Canteen Membership ID: {member?.memberID}</div>\n        <hr />\n        <div>\n          <strong>\n            Payment Plan <span className=\"text-danger\">{planName}</span>{\" \"}\n          </strong>{\" \"}\n        </div>\n        <div>Since {moment(member?.date).format(\"D MMMM  YYYY\")} </div>\n      </div>\n      <table className=\"table table-bordered\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Date</th>\n            <th scope=\"col\">Months Covered</th>\n            <th scope=\"col\">Amount</th>\n          </tr>\n        </thead>\n        <tbody>\n          {member?.payments &&\n            member?.payments.map((e) => (\n              <tr key={e._id}>\n                <td>{moment(e?.date).format(\"D MMMM  YYYY\")}</td>\n                <td>{e.covers || \"-\"}</td>\n                <td>\n                  {currentCurrency()}\n                  {e.amount}\n                </td>\n              </tr>\n            ))}\n          <tr>\n            <td colSpan=\"2\">BALANCE</td>\n            <td>\n              {currentCurrency()} {balance}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default MemberPayments;\n","import React, { useState, useEffect } from \"react\";\nimport AddForm from \"./CanteenForm\";\nimport Nav from \"./CanteenNav\";\nimport Payments from \"./MemberPayments\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\n\nfunction AddCanteenPayment() {\n  const [studentID, setstudentID] = useState(\"\");\n  const [members, setmembers] = useState([]);\n  const [member, setmember] = useState({});\n  const [amount, setamount] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [planPrice, setplanPrice] = useState(\"\");\n  const [planName, setplanName] = useState(\"\");\n  const [paymentPlan, setpaymentPlan] = useState([]);\n\n  useEffect(() => {\n    axios.get(\"/canteen\").then((res) => {\n      setmembers(res.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    axios.get(\"/paymentplan\").then((res) => {\n      ///console.log(res.data);\n      setpaymentPlan(res.data?.plans);\n    });\n  }, []);\n\n  const handleSelectuser = (id) => {\n    let selectedmember = members.find((e) => e.memberID === id);\n    setmember(selectedmember);\n    let price = paymentPlan.find(\n      (e) => e.plan === selectedmember?.paymentMethod\n    );\n    setplanPrice(price?.price);\n    setplanName(price?.name);\n    setstudentID(id);\n  };\n\n  const handleAdd = () => {\n    setloading(true);\n    axios\n      .put(`/canteen/payment/${studentID}`, {\n        amount,\n        covers: amount / planPrice,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n        }\n        successAlert(\"Payment succefully recorded\");\n        setamount(\"\");\n        setmember(res.data.doc);\n      })\n      .catch((err) => {\n        errorAlert(\"Payment Failed\");\n        console.log(err);\n        setloading(false);\n      });\n  };\n\n  return (\n    <>\n      <Nav />\n      <h3>Add Canteen Payment </h3>\n      <div className=\"mb-5 row\">\n        <div className=\"col-sm-6  content__container\">\n          <div className=\"mb-5\">\n            <label className=\"form-label\"> Select Canteen Member</label>\n            <select\n              onChange={(e) => handleSelectuser(e.target.value)}\n              className=\"form-select\"\n            >\n              <option defaultValue hidden>\n                Choose...\n              </option>\n              {members?.length > 0 ? (\n                members?.map((e) => (\n                  <option key={e.memberID} value={e.memberID}>\n                    {e.name} {e.memberID}\n                  </option>\n                ))\n              ) : (\n                <option disabled>No members yet</option>\n              )}\n            </select>\n          </div>\n          <AddForm\n            studentID={studentID}\n            setstudentID={handleSelectuser}\n            handleAdd={handleAdd}\n            loading={loading}\n            planPrice={planPrice}\n            amount={amount}\n            setamount={setamount}\n          />\n        </div>\n        <div className=\"col-sm-6\">\n          {planPrice && <Payments planName={planName} member={member} />}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AddCanteenPayment;\n"],"sourceRoot":""}