(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[9],{1093:function(e,n,t){"use strict";t(1);var c=t(136),a=t(14);n.a=function(){return Object(a.jsxs)("div",{className:"d-flex xs-flex-column sm-flex-row justify-content-end",children:[Object(a.jsx)(c.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/members/register",children:"Add  Canteen Member "}),Object(a.jsx)(c.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/members",children:"All Members"}),Object(a.jsx)(c.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments/plan",children:"Payments Plan"}),Object(a.jsx)(c.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments/add",children:"Make Payment"}),Object(a.jsx)(c.c,{activeStyle:{color:"#ffa201"},className:"btn",to:"/canteen/payments",children:"All Payments"})]})}},1922:function(e,n,t){"use strict";t.r(n);var c=t(780),a=t(80),l=t(719),i=t(1),r=t(728),s=t.n(r),o=t(1780),d=t(1160),j=t.n(d),b=t(38),u=t(753),p=t(941),h=t(825),O=t(926),v=t(917),m=t(909),x=t(747),f=t(742),g=t.n(f),y=t(1500),N=t(103),C=t(14);function S(e){var n=e.open,t=e.setOpen,c=e.descriptions,l=e.setdescriptions,i=e.prices,r=e.setprices,s=e.name,d=e.setname,j=e.title,b=e.settitle,f=e.isAdd,S=e.isPlans,P=e.onSubmit,q=e.loading,T=Object(x.a)(),k=T.register,_=T.handleSubmit,w=T.errors,A=function(){t(!1)},M=Object(N.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var n=e.children,t=e.classes,c=e.onClose,l=Object(u.a)(e,["children","classes","onClose"]);return Object(C.jsxs)(m.a,Object(a.a)(Object(a.a)({disableTypography:!0,className:t.root},l),{},{children:[Object(C.jsx)(y.a,{variant:"h6",children:n}),c?Object(C.jsx)(o.a,{"aria-label":"close",className:t.closeButton,onClick:c,children:Object(C.jsx)(g.a,{})}):null]}))}));return Object(C.jsxs)(h.a,{open:n,fullWidth:!0,maxWidth:"md",onClose:A,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(M,{id:"customized-dialog-title",onClose:A,children:"Set Canteen PaymentPlan"}),Object(C.jsxs)("form",{action:"",children:[Object(C.jsx)(v.a,{children:Object(C.jsxs)("table",{className:"table",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"col"}),Object(C.jsx)("th",{scope:"col",children:"Plan 1"}),Object(C.jsx)("th",{scope:"col",children:"Plan 2"}),Object(C.jsx)("th",{scope:"col",children:"Plan 3"})]})}),Object(C.jsxs)("tbody",{children:[S&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"row",children:"Plan Name"}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{ref:k({required:!0}),type:"text",name:"name1",value:null===s||void 0===s?void 0:s.plan1,onChange:function(e){return d(Object(a.a)(Object(a.a)({},s),{},{plan1:e.target.value}))},className:"form-control",placeholder:"Plan name"}),w.name1&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{type:"text",className:"form-control",placeholder:"Plan  name",value:null===s||void 0===s?void 0:s.plan2,onChange:function(e){return d(Object(a.a)(Object(a.a)({},s),{},{plan2:e.target.value}))},ref:k({required:!0}),name:"name2"}),w.name2&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{type:"text",className:"form-control",placeholder:"Plan  name",name:"name3",value:null===s||void 0===s?void 0:s.plan3,onChange:function(e){return d(Object(a.a)(Object(a.a)({},s),{},{plan3:e.target.value}))},ref:k({required:!0})}),w.name3&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"row",children:"Plan Price"}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{value:null===i||void 0===i?void 0:i.plan1,onChange:function(e){return r(Object(a.a)(Object(a.a)({},i),{},{plan1:e.target.value}))},type:"number",className:"form-control",placeholder:"Plan's price",name:"price1",ref:k({required:!0})}),w.price1&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{value:null===i||void 0===i?void 0:i.plan2,onChange:function(e){return r(Object(a.a)(Object(a.a)({},i),{},{plan2:e.target.value}))},type:"number",className:"form-control",placeholder:"Plan's price",name:"price2",ref:k({required:!0})}),w.price2&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("input",{value:null===i||void 0===i?void 0:i.plan3,onChange:function(e){return r(Object(a.a)(Object(a.a)({},i),{},{plan3:e.target.value}))},type:"number",className:"form-control",placeholder:"Plan's price",name:"price3",ref:k({required:!0})}),w.price3&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]})]})]}),Object(C.jsxs)("tr",{children:[f?Object(C.jsxs)("th",{children:[Object(C.jsx)("input",{value:j,onChange:function(e){return b(e.target.value)},type:"text",className:"form-control",placeholder:"Service's name",name:"title",ref:k({required:!0})}),w.title&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}):Object(C.jsx)("th",{scope:"row",children:(null===c||void 0===c?void 0:c.name)||"Description"}),Object(C.jsxs)("td",{children:[Object(C.jsx)("textarea",{value:null===c||void 0===c?void 0:c.plan1,onChange:function(e){return l(Object(a.a)(Object(a.a)({},c),{},{plan1:e.target.value}))},rows:3,className:"form-control",placeholder:"Type here...",name:"description1",ref:k({required:!0})}),w.description1&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("textarea",{value:null===c||void 0===c?void 0:c.plan2,onChange:function(e){return l(Object(a.a)(Object(a.a)({},c),{},{plan2:e.target.value}))},rows:3,className:"form-control",placeholder:"Type here...",name:"description2",ref:k({required:!0})}),w.description2&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]}),Object(C.jsxs)("td",{children:[Object(C.jsx)("textarea",{value:null===c||void 0===c?void 0:c.plan3,onChange:function(e){return l(Object(a.a)(Object(a.a)({},c),{},{plan3:e.target.value}))},rows:3,name:"description3",ref:k({required:!0}),className:"form-control",placeholder:"Type here..."}),w.description3&&Object(C.jsx)("div",{className:"text-danger mb-3",children:"This field is required."})]})]})]})]})}),Object(C.jsxs)(O.a,{children:[Object(C.jsxs)(p.a,{disabled:q,onClick:_(P),color:"primary",children:[q&&Object(C.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status"}),f?"Add":"Save Changes"]}),Object(C.jsx)(p.a,{onClick:A,color:"secondary",children:"Cancel"})]})]})]})}var P=t(60),q=t(79),T=t(721),k=t(1424),_=t.n(k),w=t(1093);n.default=function(){var e=Object(q.c)(P.d),n=Object(i.useState)({}),t=Object(l.a)(n,2),r=t[0],d=t[1],u=Object(i.useState)([]),p=Object(l.a)(u,2),h=p[0],O=p[1],v=Object(i.useState)([]),m=Object(l.a)(v,2),x=m[0],f=m[1],g=Object(i.useState)(!1),y=Object(l.a)(g,2),N=y[0],k=y[1],A=Object(i.useState)(!1),M=Object(l.a)(A,2),W=M[0],z=M[1],B=Object(i.useState)(!1),D=Object(l.a)(B,2),E=D[0],J=D[1],F=Object(i.useState)(""),G=Object(l.a)(F,2),H=G[0],I=G[1],K=Object(i.useState)(""),L=Object(l.a)(K,2),Q=L[0],R=L[1],U=Object(i.useState)(!1),V=Object(l.a)(U,2),X=V[0],Y=V[1],Z=Object(i.useState)({plan1:"",plan2:"",plan3:""}),$=Object(l.a)(Z,2),ee=$[0],ne=$[1],te=Object(i.useState)({plan1:"",plan2:"",plan3:""}),ce=Object(l.a)(te,2),ae=ce[0],le=ce[1],ie=Object(i.useState)({plan1:"",plan2:"",plan3:""}),re=Object(l.a)(ie,2),se=re[0],oe=re[1],de=function(e){var n=[];return null===e||void 0===e||e.forEach((function(e){n.find((function(n){return n._id===e._id}))||n.push(e)})),n};return Object(i.useEffect)((function(){b.a.get("/paymentplan").then((function(e){var n,t;console.log(null===e||void 0===e?void 0:e.data),d(null===e||void 0===e?void 0:e.data),O(null===(n=e.data)||void 0===n?void 0:n.plans);var c=de(null===(t=e.data)||void 0===t?void 0:t.services);f(c)}))}),[]),Object(C.jsxs)("div",{children:["admin"===(null===e||void 0===e?void 0:e.role)&&Object(C.jsx)(w.a,{}),Object(C.jsx)("h3",{className:"my-5",children:"Canteen Payment Plan"}),Object(C.jsxs)("table",{className:"table content__container",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsxs)("th",{scope:"col",children:[Object(C.jsx)("h4",{children:"Avaliable Payment Plan"}),Object(C.jsxs)("p",{children:[" ",Object(C.jsx)("small",{children:" What kind of plan are you interested in "})]})]}),h&&(null===h||void 0===h?void 0:h.map((function(e){return Object(C.jsxs)("th",{scope:"col",children:[Object(C.jsx)("h5",{children:Object(C.jsx)("strong",{children:null===e||void 0===e?void 0:e.name})}),Object(C.jsx)("p",{children:Object(C.jsx)("small",{children:null===e||void 0===e?void 0:e.description})}),Object(C.jsxs)("h1",{className:"d-flex align-items-end",children:[Object(C.jsxs)("strong",{children:[Object(T.b)(),null===e||void 0===e?void 0:e.price]})," ",Object(C.jsx)("small",{style:{fontSize:"0.4em"},children:"/month"})," "]})]},e._id)}))),"admin"===(null===e||void 0===e?void 0:e.role)&&Object(C.jsxs)("th",{children:[Object(C.jsx)("h5",{children:"Action"}),Object(C.jsx)(o.a,{onClick:function(){return function(){var e,n,t,c,a,l,i,s,o,d=null===r||void 0===r?void 0:r.plans;d&&(ne({plan1:null===(e=d[0])||void 0===e?void 0:e.name,plan2:null===(n=d[1])||void 0===n?void 0:n.name,plan3:null===(t=d[2])||void 0===t?void 0:t.name}),oe({plan1:null===(c=d[0])||void 0===c?void 0:c.description,plan2:null===(a=d[1])||void 0===a?void 0:a.description,plan3:null===(l=d[2])||void 0===l?void 0:l.description}),le({plan1:null===(i=d[0])||void 0===i?void 0:i.price,plan2:null===(s=d[1])||void 0===s?void 0:s.price,plan3:null===(o=d[2])||void 0===o?void 0:o.price})),k(!0)}()},children:Object(C.jsx)(s.a,{})})]})]})}),Object(C.jsxs)("tbody",{children:[x&&x.map((function(n){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"row",children:null===n||void 0===n?void 0:n.name}),Object(C.jsx)("td",{children:null===n||void 0===n?void 0:n.plan1}),Object(C.jsx)("td",{children:null===n||void 0===n?void 0:n.plan2}),Object(C.jsx)("td",{children:null===n||void 0===n?void 0:n.plan3}),"admin"===(null===e||void 0===e?void 0:e.role)&&Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"d-flex",children:[Object(C.jsx)(o.a,{onClick:function(){return function(e){z(!0);var n=null===r||void 0===r?void 0:r.services.find((function(n){return n._id===e}));oe(n),console.log(n),R(e)}(null===n||void 0===n?void 0:n._id)},children:Object(C.jsx)(s.a,{})}),Object(C.jsx)(o.a,{onClick:function(){return e=null===n||void 0===n?void 0:n._id,void b.a.put("/paymentplan/delete/services/".concat(e)).then((function(n){if(n.data.error)return Object(T.c)(n.data.error),0;console.log(x.filter((function(n){return n._id!==e}))),f(x.filter((function(n){return n._id!==e})))})).catch((function(e){console.log(e),Object(T.c)("Delete failed")}));var e},children:Object(C.jsx)(_.a,{})})]})})]},n._id)})),"admin"===(null===e||void 0===e?void 0:e.role)&&Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{colSpan:"4",children:"Add Additional"}),Object(C.jsx)("th",{children:Object(C.jsx)(o.a,{onClick:function(){return J(!0)},children:Object(C.jsx)(j.a,{})})})]})]})]}),Object(C.jsx)(S,{open:N,name:ee,loading:X,setname:ne,descriptions:se,setdescriptions:oe,prices:ae,isPlans:!0,setprices:le,setOpen:k,onSubmit:function(){Y(!0),b.a.put("/paymentplan/update/plans",[{name:null===ee||void 0===ee?void 0:ee.plan1,description:null===se||void 0===se?void 0:se.plan1,price:null===ae||void 0===ae?void 0:ae.plan1,plan:"plan1"},{name:null===ee||void 0===ee?void 0:ee.plan2,description:null===se||void 0===se?void 0:se.plan2,price:null===ae||void 0===ae?void 0:ae.plan2,plan:"plan2"},{name:null===ee||void 0===ee?void 0:ee.plan3,description:null===se||void 0===se?void 0:se.plan3,price:null===ae||void 0===ae?void 0:ae.plan3,plan:"plan3"}]).then((function(e){var n;if(Y(!1),e.data.error)return Object(T.c)(e.data.error),0;k(!1),le({}),oe({}),ne({}),Object(T.m)("Changes Saved"),console.log(e.data.doc),O(null===(n=e.data.doc)||void 0===n?void 0:n.plans)})).catch((function(e){Y(!1),console.log(e),Object(T.c)("Changes failed to save")}))}}),Object(C.jsx)(S,{open:W,loading:X,descriptions:se,setdescriptions:oe,setOpen:z,onSubmit:function(){Y(!0),b.a.put("/paymentplan/update/services/".concat(Q),se).then((function(e){var n;if(Y(!1),e.data.error)return Object(T.c)(e.data.error),0;z(!1),oe({}),Object(T.m)("Changes Saved");var t=de(null===(n=e.data.doc)||void 0===n?void 0:n.services);f(t)})).catch((function(e){Y(!1),console.log(e),Object(T.c)("Changes failed to save")}))}}),Object(C.jsx)(S,{title:H,loading:X,settitle:I,open:E,descriptions:se,setdescriptions:oe,isAdd:!0,setOpen:J,onSubmit:function(){Y(!0),b.a.post("/paymentplan/add/service",Object(a.a)({name:H},se)).then((function(e){if(e.data.error)return Object(T.c)(e.data.error),0;Y(!1),J(!1),oe({}),I(""),Object(T.m)("Changes Saved"),console.log(e.data.doc),f([Object(a.a)({name:H},se)].concat(Object(c.a)(x)))})).catch((function(){Y(!1),Object(T.c)("Changes failed to save")}))}})]})}}}]);
//# sourceMappingURL=9.f99cd0ce.chunk.js.map