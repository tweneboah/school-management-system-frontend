(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[183],{1834:function(e,t,a){"use strict";a.r(t);var s=a(737),o=a.n(s),i=a(738),n=a(719),l=a(1),c=a(1113),r=a(1428),d=a(1114),u=a(1161),b=a(1230),j=a(747),v=a(22),O=a(38),h=a(721),m=(a(79),a(1112)),p=a(725),f=a.n(p),S=a(14);t.default=function(){var e=Object(v.i)().id,t=Object(l.useState)(""),a=Object(n.a)(t,2),s=a[0],p=a[1],g=Object(l.useState)(""),x=Object(n.a)(g,2),y=x[0],D=x[1],N=Object(l.useState)(""),w=Object(n.a)(N,2),I=w[0],B=w[1],k=Object(l.useState)(""),A=Object(n.a)(k,2),C=A[0],_=A[1],U=Object(l.useState)(""),Y=Object(n.a)(U,2),E=Y[0],F=Y[1],R=Object(l.useState)(""),J=Object(n.a)(R,2),L=J[0],M=J[1],T=Object(l.useState)(""),z=Object(n.a)(T,2),G=z[0],H=z[1],q=Object(l.useState)(""),K=Object(n.a)(q,2),P=K[0],Q=K[1],V=Object(l.useState)(""),W=Object(n.a)(V,2),X=W[0],Z=W[1],$=Object(l.useState)(""),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],se=Object(l.useState)(""),oe=Object(n.a)(se,2),ie=oe[0],ne=oe[1],le=Object(l.useState)(""),ce=Object(n.a)(le,2),re=ce[0],de=ce[1],ue=Object(l.useState)(""),be=Object(n.a)(ue,2),je=be[0],ve=be[1],Oe=Object(l.useState)(""),he=Object(n.a)(Oe,2),me=he[0],pe=he[1],fe=Object(l.useState)(!1),Se=Object(n.a)(fe,2),ge=Se[0],xe=Se[1],ye=Object(j.a)(),De=ye.register,Ne=ye.handleSubmit,we=ye.errors,Ie=Object(l.useState)(!0),Be=Object(n.a)(Ie,2),ke=Be[0],Ae=Be[1],Ce=Object(l.useState)(""),_e=Object(n.a)(Ce,2),Ue=_e[0],Ye=_e[1],Ee=Object(l.useState)(""),Fe=Object(n.a)(Ee,2),Re=Fe[0],Je=Fe[1],Le=Object(l.useState)(""),Me=Object(n.a)(Le,2),Te=Me[0],ze=Me[1],Ge=Object(l.useState)(null),He=Object(n.a)(Ge,2),qe=He[0],Ke=He[1],Pe=Object(l.useState)(""),Qe=Object(n.a)(Pe,2),Ve=Qe[0],We=Qe[1],Xe=Object(l.useState)(""),Ze=Object(n.a)(Xe,2),$e=Ze[0],et=Ze[1],tt=Object(l.useState)(""),at=Object(n.a)(tt,2),st=at[0],ot=at[1],it=Object(l.useState)(""),nt=Object(n.a)(it,2),lt=nt[0],ct=nt[1],rt=Object(l.useState)(""),dt=Object(n.a)(rt,2),ut=dt[0],bt=dt[1],jt=Object(l.useState)(""),vt=Object(n.a)(jt,2),Ot=vt[0],ht=vt[1],mt=Object(l.useState)(""),pt=Object(n.a)(mt,2),ft=pt[0],St=pt[1],gt=Object(l.useState)(""),xt=Object(n.a)(gt,2),yt=xt[0],Dt=xt[1],Nt=Object(l.useState)(""),wt=Object(n.a)(Nt,2),It=wt[0],Bt=wt[1],kt=Object(l.useState)(""),At=Object(n.a)(kt,2),Ct=At[0],_t=At[1],Ut=Object(l.useState)(""),Yt=Object(n.a)(Ut,2),Et=Yt[0],Ft=Yt[1],Rt=Object(l.useState)([]),Jt=Object(n.a)(Rt,2),Lt=Jt[0],Mt=Jt[1];Object(l.useEffect)((function(){O.a.get("/students/student/".concat(e)).then((function(e){var t,a,s,o,i,n,l=e.data.student;p(null===l||void 0===l?void 0:l.name),D(null===l||void 0===l?void 0:l.surname),B(null===l||void 0===l?void 0:l.middleName),_(null===l||void 0===l?void 0:l.gender),F((null===l||void 0===l?void 0:l.dateofBirth)?f()(null===l||void 0===l?void 0:l.dateofBirth).format("YYYY-MM-D"):" "),M(null===l||void 0===l?void 0:l.email),H(null===l||void 0===l?void 0:l.nationality),Q(null===l||void 0===l?void 0:l.placeofBirth),Z(null===l||void 0===l?void 0:l.religion),ae(null===l||void 0===l?void 0:l.health),bt(null===l||void 0===l?void 0:l.division),ne(null===l||void 0===l?void 0:l.allege),ht(null===l||void 0===l?void 0:l.campusID),de(null===l||void 0===l?void 0:l.disease),Je(null===l||void 0===l?void 0:l.classID),ze(null===l||void 0===l?void 0:l.section),Ke(null===l||void 0===l?void 0:l.status),et(null===l||void 0===l?void 0:l.scholarship),We(null===l||void 0===l?void 0:l.dormitoryID),et(null===l||void 0===l?void 0:l.schoolarship),ot(null===l||void 0===l?void 0:l.fees),ct(null===l||void 0===l||null===(t=l.lastSchool)||void 0===t||null===(a=t.school)||void 0===a||null===(s=a.school)||void 0===s?void 0:s.school),St(null===l||void 0===l||null===(o=l.lastSchool)||void 0===o||null===(i=o.school)||void 0===i||null===(n=i.school)||void 0===n?void 0:n.reason),Dt(null===l||void 0===l?void 0:l.mobilenumber),Bt(null===l||void 0===l?void 0:l.physicalAddress),_t(null===l||void 0===l?void 0:l.telephone),Ft(null===l||void 0===l?void 0:l.postalAddress),Mt(null===l||void 0===l?void 0:l.guadian),pe(null===l||void 0===l?void 0:l.profileUrl)}))}),[e]);var Tt=function(){var t=Object(i.a)(o.a.mark((function t(){var a,n,l,c,r,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(xe(!0),r=new FormData,d="",!je){t.next=8;break}return r.append("photo",je),t.next=7,O.a.post("/upload",r,{});case 7:d=t.sent;case 8:return console.log(null===(a=d)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.path),t.next=11,O.a.put("/students/update/".concat(e),{profileUrl:(null===(l=d)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.path)||me,name:s,middleName:I,surname:y,gender:C,dateofBirth:E,email:L,nationality:G,religion:X,placeofBirth:P,health:te,disease:re,division:ut,allege:ie,classID:Re,campusID:Ot,section:Te,dormitoryID:Ve,status:qe,scholarship:$e,fees:st,lastSchool:{school:lt,reason:ft},mobilenumber:yt,telephone:Ct,postalAddress:Et,physicalAddress:It,guadian:Lt}).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(!1),console.log(t),!t.data.error){e.next=4;break}return e.abrupt("return",Object(h.c)(t.data.error));case 4:return Object(h.m)("successfully updated"),e.next=7,O.a.post("/activitylog/create",{activity:"student  ".concat(s," ").concat(y," was edited"),user:"admin"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){xe(!1),console.log(e),Object(h.c)("something went wrong")}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),zt=function(e){Mt(Lt.filter((function(t){return t.id!==e})))};return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Edit Students"}),Object(S.jsx)("div",{children:Object(S.jsxs)("form",{action:"",className:"content__container",children:[Object(S.jsx)(u.a,{profileimg:me,profileUrl:je,setprofileUrl:function(e){var t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)Object(h.c)("image is too large");else if(t){ve(t);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){pe(a.result)}}else console.log("no file selected")}}),Object(S.jsx)(c.a,{register:De,errors:we,name:s,setname:p,secondName:I,setsecondName:B,lastname:y,setlastname:D,gender:C,setgender:_,dateofBirth:E,setdateofBirth:F,email:L,setemail:M,nationality:G,setnationality:H,placeofBirth:P,setplaceofBirth:Q,religion:X,setreligion:Z,healthCon:te,setHealthCon:ae,disease:re,setDisease:de,allerge:ie,setallerge:ne}),Object(S.jsx)("br",{className:"my-5"}),Object(S.jsx)(r.a,{register:De,errors:we,isEdit:!0,autoID:ke,setautoID:Ae,userID:Ue,setuserID:Ye,classID:Re,setclass:Je,division:ut,setdivision:bt,section:Te,setsection:ze,status:qe,setstatus:Ke,dormitory:Ve,campus:Ot,setcampus:ht,setdormitory:We,schoolarship:$e,setschoolarship:et,feesCategory:st,setfeesCategory:ot,lastSchool:lt,setlastSchool:ct,reasonforTransfer:ft,setreasonforTransfer:St}),Object(S.jsx)("br",{className:"my-5"}),Object(S.jsx)(d.a,{register:De,errors:we,mobilenumber:yt,setmobilenumber:Dt,residence:It,setresidence:Bt,settelephone:_t,telephone:Ct,setpostalAddress:Ft,postalAddress:Et}),Object(S.jsx)("br",{className:"my-5"}),Object(S.jsx)(b.a,{guadian:Lt,setguadian:Mt}),Object(S.jsx)("div",{className:"row",children:Lt&&Lt.map((function(e,t){return Object(S.jsx)("div",{className:"col-xs-12 col-sm-6",children:Object(S.jsx)(m.a,{guadian:e,handleDeleteGuadian:zt},t)})}))}),Object(S.jsxs)("div",{className:"row ",children:[Object(S.jsx)("button",{type:"submit",disabled:ge,onClick:Ne(Tt),className:" col btn orange__btn mr-5",children:ge?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(S.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):"Save Changes"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),Ae(!0),Ke(""),Je(""),ze(""),We(""),et(""),ot(""),Ye(""),de(""),Mt([]),St(""),_t(""),bt(""),Ft(""),Bt(""),Dt(""),ct(""),ne(""),ae(),p(""),ht(""),B(""),D(""),_(""),F(""),M(""),H(""),Q(""),Z("")},className:" col btn blue__btn mr-5",children:"Reset"})]})]})})]})}}}]);
//# sourceMappingURL=183.0a6b56d5.chunk.js.map