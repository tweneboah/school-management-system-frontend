(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[164],{1195:function(e,t,s){"use strict";var c=s(716),a=s(1),n=s(745),l=s(38),r=s(14);t.a=function(e){var t=Object(n.a)(),s=t.register,o=t.handleSubmit,i=t.errors,d=Object(a.useState)([]),b=Object(c.a)(d,2),j=b[0],u=b[1],h=Object(a.useState)([]),f=Object(c.a)(h,2),O=f[0],m=f[1];Object(a.useEffect)((function(){l.a.get("/classes").then((function(e){console.log(e.data),u(e.data)}))}),[]),Object(a.useEffect)((function(){l.a.get("/courses").then((function(e){console.log(e.data),m(e.data)}))}),[]);var p=e.classID,x=e.setclass,g=e.subject,v=e.setsubject,N=e.topic,C=e.settopic,S=e.loading,k=e.handleAdd,w=e.handleReset,y=e.isEdit,D=e.role,_=e.setfile,F=e.notes,I=e.setnotes;return Object(r.jsxs)("form",{className:"row g-3",action:"",children:["admin"===D&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("label",{className:"form-label",children:"Select Class"}),Object(r.jsxs)("select",{value:p,onChange:function(e){return x(e.target.value)},name:"class",className:"form-select",children:[Object(r.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),j.length>0?j.map((function(e){return Object(r.jsx)("option",{value:e.classCode,children:e.name},e.classCode)})):Object(r.jsx)("option",{disabled:!0,children:"No classes available yet"})]})]}),Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("label",{className:"form-label",children:"Select Subject"}),Object(r.jsxs)("select",{value:g,onChange:function(e){return v(e.target.value)},name:"class",className:"form-select",children:[Object(r.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),O.length>0?O.map((function(e){return Object(r.jsx)("option",{value:e.code,children:e.name},e.code)})):Object(r.jsx)("option",{disabled:!0,children:"No courses available yet"})]})]})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Topic"}),Object(r.jsx)("input",{value:N,ref:s({required:!0}),onChange:function(e){return C(e.target.value)},type:"text",className:"form-control",name:"topic"}),i.topic&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Notes"}),Object(r.jsx)("textarea",{value:F,onChange:function(e){return I(e.target.value)},rows:5,className:"form-control",id:"topic"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("label",{className:"form-label",children:"Upload file"}),Object(r.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.doc,.docx,.pdf, .zip",ref:s({required:!0}),onChange:function(e){return _(e)},className:"form-control",name:"file"}),i.file&&Object(r.jsx)("span",{className:" form-error text-danger mb-2",children:"Please select file"})]}),Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsxs)("button",{onClick:o(k),className:"btn blue__btn mr-3",children:[S&&Object(r.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),y?"Save Changes":"Add"]}),Object(r.jsx)("button",{onClick:o(w),className:"btn orange__btn",children:"Reset"})]})]})}},1854:function(e,t,s){"use strict";s.r(t);var c=s(733),a=s.n(c),n=s(734),l=s(716),r=s(1),o=s(1195),i=s(38),d=s(718),b=s(76),j=s(60),u=s(14);t.default=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),s=t[0],c=t[1],h=Object(r.useState)(""),f=Object(l.a)(h,2),O=f[0],m=f[1],p=Object(r.useState)(""),x=Object(l.a)(p,2),g=x[0],v=x[1],N=Object(r.useState)(""),C=Object(l.a)(N,2),S=C[0],k=C[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),D=y[0],_=y[1],F=Object(b.c)(j.d),I=Object(r.useState)(!1),A=Object(l.a)(I,2),q=A[0],E=A[1],R=function(){var e=Object(n.a)(a.a.mark((function e(){var t,c,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return",Object(d.c)("Please select file"));case 2:return E(!0),(t=new FormData).append("photo",D),e.next=7,i.a.post("/upload",t,{});case 7:if(!(c=e.sent).error){e.next=10;break}return e.abrupt("return",Object(d.c)("The file is too big"));case 10:return n=c.path,e.next=13,i.a.post("/notes/create",{topic:g,classID:s,courseID:O,notes:S,file:n,senderID:null===F||void 0===F?void 0:F.id}).then((function(e){if(console.log(e.data),e.data.error)return Object(d.c)(e.data.error),E(!1),0;Object(d.m)("notes successfully added"),E(!1),T()})).catch((function(e){console.log(e),E(!1),Object(d.c)("File is too big")}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){c(""),m(""),v(""),k(""),_("")};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"content__container mb-5",children:[Object(u.jsx)("h3",{children:"Add Notes File"}),Object(u.jsx)(o.a,{classID:s,setclass:c,subject:O,setsubject:m,topic:g,settopic:v,file:D,loading:q,handleReset:T,setfile:function(e){var t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)return Object(d.c)("image is too large");_(t)},role:null===F||void 0===F?void 0:F.role,handleAdd:R,notes:S,setnotes:k})]})})}}}]);
//# sourceMappingURL=164.c603654b.chunk.js.map