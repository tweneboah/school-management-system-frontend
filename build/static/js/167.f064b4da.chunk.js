(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[167],{1842:function(e,t,s){"use strict";s.r(t);var n=s(716),c=s(1),a=s(923),r=s(38),i=s(718),o=s(76),l=s(60),d=s(14);t.default=function(){var e=Object(c.useState)(""),t=Object(n.a)(e,2),s=t[0],j=t[1],u=Object(c.useState)([]),b=Object(n.a)(u,2),m=b[0],h=b[1],O=Object(c.useState)(""),p=Object(n.a)(O,2),v=p[0],f=p[1],x=Object(o.c)(l.d),N=Object(c.useState)(!1),g=Object(n.a)(N,2),S=g[0],w=g[1],_=Object(c.useState)(""),C=Object(n.a)(_,2),k=C[0],y=C[1];return Object(c.useEffect)((function(){r.a.get("/teachers").then((function(e){h(e.data.map((function(e){return{id:e.userID,name:e.name,telephone:(null===e||void 0===e?void 0:e.telephone)||(null===e||void 0===e?void 0:e.mobilenumber),surname:e.surname}})))}))}),[]),Object(d.jsx)("div",{children:Object(d.jsx)(a.a,{message:s,setmessage:j,onSend:function(e){if(e.preventDefault(),y(""),v||y("Please select recipient"),s&&v){w(!0);var t=m.find((function(e){return e.id===v}));r.a.post("/chats",{message:s,telephone:null===t||void 0===t?void 0:t.telephone,userID:v,sender:null===x||void 0===x?void 0:x.id}).then((function(e){if(w(!1),e.data.error)return Object(i.c)(e.data.error),0;Object(i.m)("message send"),j("")})).catch((function(e){console.log(e),w(!1)}))}},loading:S,recipientsOptions:m,recipient:v,setrecipient:f,sender:null===x||void 0===x?void 0:x.id,searchOptions:function(){return m.map((function(e){return Object(d.jsxs)("option",{value:e.id,children:[e.name," ",e.surname," ",e.id," "]},e.id)}))},sendto:"Staff",error:k})})}},923:function(e,t,s){"use strict";s(1);var n=s(14);t.a=function(e){var t=e.message,s=e.setmessage,c=e.onSend,a=e.recipient,r=e.setrecipient,i=e.sender,o=e.sendto,l=e.searchOptions,d=e.loading,j=e.error;return Object(n.jsxs)("form",{action:"",className:" content__container form__sender",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsxs)("h3",{children:["Send Message to ",o]})}),Object(n.jsxs)("div",{className:"row mb-2 px-3",children:[Object(n.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Recipient:"}),Object(n.jsx)("div",{className:"col-sm-10",children:Object(n.jsxs)("select",{value:a,onChange:function(e){return r(e.target.value)},id:"inputState",className:"form-select",children:[Object(n.jsx)("option",{defaultChecked:!0,hidden:!0,children:"Choose..."}),l?l():Object(n.jsx)("option",{disabled:!0,children:"No options"})]})})]}),Object(n.jsxs)("div",{className:"row mb-2 px-3",children:[Object(n.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Sender:"}),Object(n.jsx)("div",{className:"col-sm-10",children:Object(n.jsx)("input",{className:"form-control",value:i,type:"text",readOnly:!0})})]}),Object(n.jsxs)("div",{className:"mb-2 row",children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("textarea",{value:t,onChange:function(e){return s(e.target.value)},className:"form-control",name:"",rows:"10",required:!0,placeholder:"Type here"})}),j&&Object(n.jsx)("div",{className:"text-danger text-center mb-2",children:j}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsxs)("button",{disabled:d,onClick:c,className:"btn blue__btn w-100",children:[d&&Object(n.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Send"]})})]})]})}}}]);
//# sourceMappingURL=167.f064b4da.chunk.js.map