(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[72],{1961:function(e,t,n){"use strict";n.r(t);var a=n(733),c=n.n(a),r=n(770),s=n(734),i=n(716),l=n(1),o=n(725),d=n.n(o),j=n(1807),b=n(1167),u=n.n(b),h=n(38),O=n(77),x=n(750),m=n(101),f=n(948),v=n(796),p=n(847),g=n(848),y=n(927),w=n(744),S=n.n(w),N=n(1522),C=n(745),k=n(14),A=Object(m.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose,c=Object(x.a)(e,["children","classes","onClose"]);return Object(k.jsxs)(p.a,Object(O.a)(Object(O.a)({disableTypography:!0,className:n.root},c),{},{children:[Object(k.jsx)(N.a,{variant:"h6",children:t}),a?Object(k.jsx)(j.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(k.jsx)(S.a,{})}):null]}))})),q=Object(m.a)((function(e){return{root:{padding:e.spacing(2)}}}))(g.a),_=Object(m.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(y.a);function P(e){var t=e.open,n=e.setOpen,a=e.name,c=e.salary,r=e.allowance,s=e.bonus,i=e.setname,l=e.setsalary,o=e.isAdd,d=e.loading,j=e.onSubmit,b=e.setallowance,u=e.setbonus,h=Object(C.a)(),O=h.register,x=h.handleSubmit,m=h.errors,p=function(){n(!1)};return Object(k.jsxs)(v.a,{onClose:p,fullWidth:!0,maxWidth:"sm","aria-labelledby":"customized-dialog-title",open:t,children:[Object(k.jsx)(A,{id:"customized-dialog-title",onClose:p,children:o?" Add New Staff Position":"Edit Staff Position"}),Object(k.jsxs)("form",{action:"",children:[Object(k.jsxs)(q,{children:[Object(k.jsxs)("div",{className:"mb-3",children:[Object(k.jsx)("label",{htmlFor:"",children:"Position's Name"}),o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("input",{ref:O({required:!0}),type:"text",name:"name",value:a,onChange:function(e){return i(e.target.value)},className:"form-control"}),m.name&&Object(k.jsx)("div",{className:"text-danger mb-3",children:"This field  is required."})]}):Object(k.jsx)("input",{ref:O({required:!0}),type:"text",name:"name",value:a,readOnly:!0,className:"form-control"})]}),Object(k.jsxs)("div",{className:"mb-3",children:[Object(k.jsx)("label",{htmlFor:"",children:"Salary"}),Object(k.jsx)("input",{ref:O({required:!0}),type:"number",name:"salary",value:c,onChange:function(e){return l(e.target.value)},className:"form-control"}),m.salary&&Object(k.jsx)("div",{className:"text-danger mb-3",children:"This field  is required."})]}),Object(k.jsxs)("div",{className:"mb-3",children:[Object(k.jsx)("label",{htmlFor:"",children:"Allowance"}),Object(k.jsx)("input",{ref:O({required:!0}),type:"number",name:"allowance",value:r,onChange:function(e){return b(e.target.value)},className:"form-control"}),m.allowance&&Object(k.jsx)("div",{className:"text-danger mb-3",children:"This field  is required."})]}),Object(k.jsxs)("div",{className:"mb-3",children:[Object(k.jsx)("label",{htmlFor:"",children:"Bonus"}),Object(k.jsx)("input",{ref:O({required:!0}),type:"number",name:"bonus",value:s,onChange:function(e){return u(e.target.value)},className:"form-control"}),m.bonus&&Object(k.jsx)("div",{className:"text-danger mb-3",children:"This field  is required."})]})]}),Object(k.jsxs)(_,{children:[Object(k.jsxs)(f.a,{disabled:d,onClick:x(j),color:"primary",children:[d&&Object(k.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status"}),o?"Add":"Save Changes"]}),Object(k.jsx)(f.a,{onClick:p,color:"secondary",children:"Cancel"})]})]})]})}var F=n(60),T=n(76),B=n(718),z=n(1449),D=n.n(z);t.default=function(){var e=Object(T.c)(F.d),t=Object(l.useState)([]),n=Object(i.a)(t,2),a=n[0],o=n[1],b=Object(l.useState)(!1),O=Object(i.a)(b,2),x=O[0],m=O[1],f=Object(l.useState)(!1),v=Object(i.a)(f,2),p=v[0],g=v[1],y=Object(l.useState)(""),w=Object(i.a)(y,2),S=w[0],N=w[1],C=Object(l.useState)(""),A=Object(i.a)(C,2),q=A[0],_=A[1],z=Object(l.useState)(!1),E=Object(i.a)(z,2),J=E[0],W=E[1],I=Object(l.useState)(""),R=Object(i.a)(I,2),G=R[0],H=R[1],K=Object(l.useState)(""),L=Object(i.a)(K,2),M=L[0],Q=L[1],U=Object(l.useState)(""),V=Object(i.a)(U,2),X=V[0],Y=V[1];Object(l.useEffect)((function(){h.a.get("/payrow").then((function(e){o(e.data)}))}),[]);var Z=Object(B.b)();return Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{className:"my-5",children:"Staff Roles and Payrow Details"}),Object(k.jsxs)("table",{className:"table content__container",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsxs)("th",{scope:"col",children:[Object(k.jsx)("h4",{children:"Staff Position"}),Object(k.jsxs)("p",{children:[" ",Object(k.jsx)("small",{children:" Available position in the school "})]})]}),Object(k.jsx)("th",{children:Object(k.jsx)("h5",{children:Object(k.jsxs)("strong",{children:[" Salary (",Z,")"]})})}),Object(k.jsx)("th",{children:Object(k.jsx)("h5",{children:Object(k.jsxs)("strong",{children:[" Allowance (",Z,")"]})})}),Object(k.jsx)("th",{children:Object(k.jsx)("h5",{children:Object(k.jsxs)("strong",{children:[" Bonus (",Z,")"]})})}),"admin"===(null===e||void 0===e?void 0:e.role)&&Object(k.jsx)("th",{children:Object(k.jsx)("h5",{children:"Action"})})]})}),Object(k.jsxs)("tbody",{children:[a&&a.map((function(t){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.name}),Object(k.jsx)("td",{children:null===t||void 0===t?void 0:t.salary}),Object(k.jsx)("td",{children:null===t||void 0===t?void 0:t.allowance}),Object(k.jsx)("td",{children:null===t||void 0===t?void 0:t.bonus}),"admin"===(null===e||void 0===e?void 0:e.role)&&Object(k.jsxs)("td",{className:"d-flex",children:[Object(k.jsx)(j.a,{onClick:function(){return function(e){m(!0);var t=null===a||void 0===a?void 0:a.find((function(t){return t._id===e}));Y(null===t||void 0===t?void 0:t.salary),H(null===t||void 0===t?void 0:t.allowance),Q(null===t||void 0===t?void 0:t.bonus),N(null===t||void 0===t?void 0:t.name),_(e)}(null===t||void 0===t?void 0:t._id)},children:Object(k.jsx)(d.a,{})}),Object(k.jsx)(j.a,{onClick:function(){return e=null===t||void 0===t?void 0:t._id,void h.a.delete("/payrow/delete/".concat(e)).then((function(t){if(t.data.error)return Object(B.c)(t.data.error),0;o(a.filter((function(t){return t._id!==e})))})).catch((function(e){console.log(e),Object(B.c)("Delete failed")}));var e},children:Object(k.jsx)(D.a,{})})]})]},t._id)})),Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{colSpan:"4",children:"Add Additional Position"}),Object(k.jsx)("th",{children:Object(k.jsx)(j.a,{onClick:function(){return g(!0)},children:Object(k.jsx)(u.a,{})})})]})]})]}),Object(k.jsx)(P,{open:x,loading:J,salary:X,setsalary:Y,bonus:M,name:S,setname:N,allowance:G,setallowance:H,setbonus:Q,setOpen:m,onSubmit:function(){W(!0),h.a.put("/payrow/update/".concat(q),{salary:X,allowance:G,bonus:M}).then(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!1),!t.data.error){e.next=4;break}return Object(B.c)(t.data.error),e.abrupt("return",0);case 4:return m(!1),Y(""),H(""),Q(""),N(""),Object(B.m)("Changes Saved"),n=a,r=a.findIndex((function(e){return e._id===q})),n[r]=t.data.doc,o(n),e.next=16,h.a.post("/activitylog/create",{activity:" ".concat(S," payrow was edited"),user:"admin"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){W(!1),console.log(e),Object(B.c)("Changes failed to save")}))}}),Object(k.jsx)(P,{name:S,loading:J,setname:N,allowance:G,setallowance:H,open:p,salary:X,bonus:M,setbonus:Q,setsalary:Y,isAdd:!0,setOpen:g,onSubmit:function(){W(!0),h.a.post("/payrow/add",{name:S,salary:X,allowance:G,bonus:M}).then(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.error){e.next=3;break}return Object(B.c)(t.data.error),e.abrupt("return",0);case 3:return W(!1),g(!1),Y(""),H(""),Q(""),N(""),Object(B.m)("Changes Saved"),o([t.data.doc].concat(Object(r.a)(a))),e.next=13,h.a.post("/activitylog/create",{activity:" ".concat(S," payrow was created"),user:"admin"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){W(!1),Object(B.c)("Changes failed to save")}))}})]})}}}]);
//# sourceMappingURL=72.9ee04ecd.chunk.js.map