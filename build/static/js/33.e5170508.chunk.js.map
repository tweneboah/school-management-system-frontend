{"version":3,"sources":["TeachersComponents/dashboard/EditProfile.js"],"names":["EditProfile","useState","details","setdetails","name","setname","lastname","setlastname","secondName","setsecondName","gender","setgender","dateofBirth","setdateofBirth","email","setemail","nationality","setnationality","placeofBirth","setplaceofBirth","religion","setreligion","title","settitle","health","sethealth","allege","setallege","disease","setdisease","loading","setloading","user","useSelector","selectUser","useForm","register","handleSubmit","errors","mobilenumber","setmobilenumber","residence","setresidence","telephone","settelephone","postalAddress","setpostalAddress","nexttelephone","setnexttelephone","nextname","setnextname","nextlastname","setnextlastname","nextemail","setnextemail","relationship","setrelationship","occupation","setoccupation","address","setaddress","useEffect","axios","get","userID","then","res","data","teacher","surname","middleName","moment","format","physicalAddress","mobile","nextofKin","action","className","setTitle","isTeacher","healthCon","setHealthCon","setDisease","allerge","setallerge","type","onClick","put","error","errorAlert","successAlert","catch","err","console","log","role","aria-hidden","e","preventDefault"],"mappings":"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","file":"static/js/33.e5170508.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PersonalInfo from \"../../AdminComponents/shared/Personalnfo\";\nimport ContactDetails from \"../../AdminComponents/shared/Contact\";\nimport NextofKin from \"../../AdminComponents/shared/NextofKin\";\nimport { useForm } from \"react-hook-form\";\nimport moment from \"moment\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport { useSelector } from \"react-redux\";\n\nfunction EditProfile() {\n  const [details, setdetails] = useState({});\n  const [name, setname] = useState(\"\");\n  const [lastname, setlastname] = useState(\"\");\n  const [secondName, setsecondName] = useState(\"\");\n  const [gender, setgender] = useState(\"\");\n  const [dateofBirth, setdateofBirth] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [nationality, setnationality] = useState(\"\");\n  const [placeofBirth, setplaceofBirth] = useState(\"\");\n  const [religion, setreligion] = useState(\"\");\n  const [title, settitle] = useState(\"\");\n  const [health, sethealth] = useState(\"\");\n  const [allege, setallege] = useState(\"\");\n  const [disease, setdisease] = useState(\"\");\n  const [loading, setloading] = useState(\"\");\n  const user = useSelector(selectUser);\n\n  //form verification\n  const { register, handleSubmit, errors } = useForm();\n\n  //contact details\n  const [mobilenumber, setmobilenumber] = useState(\"\");\n  const [residence, setresidence] = useState(\"\");\n  const [telephone, settelephone] = useState(\"\");\n  const [postalAddress, setpostalAddress] = useState(\"\");\n\n  //guidan\n\n  const [nexttelephone, setnexttelephone] = useState(\"\");\n  const [nextname, setnextname] = useState(\"\");\n  const [nextlastname, setnextlastname] = useState(\"\");\n  const [nextemail, setnextemail] = useState(\"\");\n  const [relationship, setrelationship] = useState(\"\");\n  const [occupation, setoccupation] = useState(\"\");\n  const [address, setaddress] = useState(\"\");\n\n  useEffect(() => {\n    axios.get(`/teachers/${user?.userID}`).then((res) => {\n      let data = res.data.teacher;\n      setdetails(data);\n      setname(data?.name);\n      setlastname(data?.surname);\n      setgender(data?.gender);\n      setsecondName(data?.middleName);\n      setdateofBirth(\n        data?.dateofBirth ? moment(data?.dateofBirth).format(\"YYYY-MM-DD\") : \"\"\n      );\n      setemail(data?.email);\n      setnationality(data?.nationality);\n      setplaceofBirth(data?.placeofBirth);\n      setreligion(data?.religion);\n      settitle(data?.title);\n      sethealth(data?.health);\n      setallege(data?.allege);\n      setdisease(data?.disease);\n      setmobilenumber(data?.telephone);\n      setresidence(data?.physicalAddress);\n      settelephone(data?.mobile);\n      setpostalAddress(data?.postalAddress);\n      setnexttelephone(data?.nextofKin?.mobile);\n      setnextemail(data?.nextofKin?.email);\n      setnextlastname(data?.nextofKin?.lastname);\n      setnextname(data?.nextofKin?.name);\n      setaddress(data?.nextofKin?.address);\n      setoccupation(data?.nextofKin?.occupation);\n      setrelationship(data?.nextofKin?.relationship);\n    });\n  }, [user]);\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setname(details?.name);\n    setlastname(details?.surname);\n    setgender(details?.gender);\n    setsecondName(details?.middleName);\n    setdateofBirth(details?.dateofBirth);\n    setemail(details?.email);\n    setnationality(details?.nationality);\n    setplaceofBirth(details?.placeofBirth);\n    setreligion(details?.religion);\n    settitle(details?.title);\n    setmobilenumber(details?.telephone);\n    setresidence(details?.physicalAddress);\n    settelephone(details?.mobile);\n    setpostalAddress(details?.postalAddress);\n    setnexttelephone(details?.nextofKin?.mobile);\n    setnextemail(details.nextofKin?.email);\n    setnextlastname(details.nextofKin?.name);\n    setnextname(details.nextofKin?.name);\n    setaddress(details.nextofKin?.address);\n    setoccupation(details.nextofKin?.occupation);\n    setrelationship(details.nextofKin?.relationship);\n  };\n\n  const handleCreateSubmit = () => {\n    setloading(true);\n    axios\n      .put(`/teachers/update/${user?.userID}`, {\n        name,\n        middleName: secondName,\n        surname: lastname,\n        gender,\n        dateofBirth,\n        email,\n        nationality,\n        religion,\n        placeofBirth,\n        health,\n        disease,\n        allege,\n        mobilenumber,\n        telephone,\n        postalAddress,\n        physicalAddress: residence,\n        nextofKin: {\n          name: nextname,\n          relationship: relationship,\n          occupation: occupation,\n          email: nextemail,\n          mobile: nexttelephone,\n          address: address,\n          lastname: nextlastname,\n        },\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        successAlert(\"Successfully Edited\");\n      })\n      .catch((err) => {\n        console.log(err);\n        errorAlert(\"Something went wrong\");\n        setloading(false);\n      });\n  };\n\n  return (\n    <div>\n      <h2>Edit Staff Member</h2>\n      <form action=\"\" className=\"content__container\">\n        <PersonalInfo\n          register={register}\n          title={title}\n          setTitle={settitle}\n          isTeacher={true}\n          errors={errors}\n          name={name}\n          setname={setname}\n          secondName={secondName}\n          setsecondName={setsecondName}\n          lastname={lastname}\n          setlastname={setlastname}\n          gender={gender}\n          setgender={setgender}\n          dateofBirth={dateofBirth}\n          setdateofBirth={setdateofBirth}\n          email={email}\n          setemail={setemail}\n          nationality={nationality}\n          setnationality={setnationality}\n          placeofBirth={placeofBirth}\n          setplaceofBirth={setplaceofBirth}\n          religion={religion}\n          setreligion={setreligion}\n          healthCon={health}\n          setHealthCon={sethealth}\n          disease={disease}\n          setDisease={setdisease}\n          allerge={allege}\n          setallerge={setallege}\n        />\n        <br className=\"my-4\" />\n        <ContactDetails\n          register={register}\n          errors={errors}\n          mobilenumber={mobilenumber}\n          setmobilenumber={setmobilenumber}\n          residence={residence}\n          setresidence={setresidence}\n          settelephone={settelephone}\n          telephone={telephone}\n          setpostalAddress={setpostalAddress}\n          postalAddress={postalAddress}\n        />\n        <br className=\"my-4\" />\n        <NextofKin\n          lastname={nextlastname}\n          setlastname={setnextlastname}\n          name={nextname}\n          setname={setnextname}\n          errors={errors}\n          register={register}\n          telephone={nexttelephone}\n          settelephone={setnexttelephone}\n          email={nextemail}\n          setemail={setnextemail}\n          setaddress={setaddress}\n          address={address}\n          occupation={occupation}\n          setoccupation={setoccupation}\n          relationship={relationship}\n          setrelationship={setrelationship}\n        />\n        <br className=\"my-4\" />\n\n        <div className=\"row \">\n          <button\n            type=\"submit\"\n            onClick={handleSubmit(handleCreateSubmit)}\n            className=\" col btn orange__btn mr-5\"\n          >\n            {loading ? (\n              <>\n                <span\n                  className=\"spinner-border spinner-border-sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"visually-hidden\">Loading...</span>\n              </>\n            ) : (\n              \"Save Changes\"\n            )}\n          </button>\n          <button onClick={handleReset} className=\" col btn blue__btn\">\n            Reset\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default EditProfile;\n"],"sourceRoot":""}