(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[184],{1860:function(e,t,a){"use strict";a.r(t);var s=a(733),c=a.n(s),r=a(734),n=a(716),o=a(1),i=a(1115),b=a(1452),l=a(1116),j=a(1168),u=a(1241),d=a(745),O=a(1114),m=a(38),h=a(718),p=(a(60),a(76)),f=a(14);t.default=function(){var e=Object(o.useState)(""),t=Object(n.a)(e,2),a=t[0],s=t[1],S=Object(o.useState)(""),g=Object(n.a)(S,2),x=g[0],v=g[1],y=Object(o.useState)(""),N=Object(n.a)(y,2),D=N[0],w=N[1],I=Object(o.useState)(""),k=Object(n.a)(I,2),C=k[0],A=k[1],B=Object(o.useState)(""),_=Object(n.a)(B,2),U=_[0],F=_[1],R=Object(o.useState)(""),J=Object(n.a)(R,2),L=J[0],T=J[1],z=Object(o.useState)(""),G=Object(n.a)(z,2),H=G[0],q=G[1],E=Object(o.useState)(""),K=Object(n.a)(E,2),M=K[0],P=K[1],Q=Object(o.useState)(""),V=Object(n.a)(Q,2),W=V[0],X=V[1],Y=Object(o.useState)(""),Z=Object(n.a)(Y,2),$=Z[0],ee=Z[1],te=Object(o.useState)(""),ae=Object(n.a)(te,2),se=ae[0],ce=ae[1],re=Object(o.useState)(""),ne=Object(n.a)(re,2),oe=ne[0],ie=ne[1],be=Object(o.useState)(""),le=Object(n.a)(be,2),je=le[0],ue=le[1],de=(Object(p.b)(),Object(o.useState)("")),Oe=Object(n.a)(de,2),me=Oe[0],he=Oe[1],pe=Object(o.useState)(""),fe=Object(n.a)(pe,2),Se=fe[0],ge=fe[1],xe=Object(d.a)(),ve=xe.register,ye=xe.handleSubmit,Ne=xe.errors,De=Object(o.useState)(!0),we=Object(n.a)(De,2),Ie=we[0],ke=we[1],Ce=Object(o.useState)(""),Ae=Object(n.a)(Ce,2),Be=Ae[0],_e=Ae[1],Ue=Object(o.useState)(""),Fe=Object(n.a)(Ue,2),Re=Fe[0],Je=Fe[1],Le=Object(o.useState)(""),Te=Object(n.a)(Le,2),ze=Te[0],Ge=Te[1],He=Object(o.useState)(""),qe=Object(n.a)(He,2),Ee=qe[0],Ke=qe[1],Me=Object(o.useState)(null),Pe=Object(n.a)(Me,2),Qe=Pe[0],Ve=Pe[1],We=Object(o.useState)(""),Xe=Object(n.a)(We,2),Ye=Xe[0],Ze=Xe[1],$e=Object(o.useState)(""),et=Object(n.a)($e,2),tt=et[0],at=et[1],st=Object(o.useState)(""),ct=Object(n.a)(st,2),rt=ct[0],nt=ct[1],ot=Object(o.useState)(""),it=Object(n.a)(ot,2),bt=it[0],lt=it[1],jt=Object(o.useState)(""),ut=Object(n.a)(jt,2),dt=ut[0],Ot=ut[1],mt=Object(o.useState)(""),ht=Object(n.a)(mt,2),pt=ht[0],ft=ht[1],St=Object(o.useState)(""),gt=Object(n.a)(St,2),xt=gt[0],vt=gt[1],yt=Object(o.useState)(""),Nt=Object(n.a)(yt,2),Dt=Nt[0],wt=Nt[1],It=Object(o.useState)(""),kt=Object(n.a)(It,2),Ct=kt[0],At=kt[1],Bt=Object(o.useState)(""),_t=Object(n.a)(Bt,2),Ut=_t[0],Ft=_t[1],Rt=Object(o.useState)([]),Jt=Object(n.a)(Rt,2),Lt=Jt[0],Tt=Jt[1],zt=function(e){Tt(Lt.filter((function(t){return t.id!==e})))},Gt=function(){ke(!0),Ve(""),Je(""),Ge(""),Ze(""),at(""),nt(""),_e(""),ie(""),Tt([]),ft(""),At(""),Ft(""),wt(""),vt(""),lt(""),ce(""),ee(),Ot(""),Ke(""),s(""),w(""),v(""),A(""),F(""),T(""),q(""),P(""),X("")},Ht=function(){var e=Object(r.a)(c.a.mark((function e(){var t,s,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!0),(n=new FormData).append("photo",me),!me){e.next=7;break}return e.next=6,m.a.post("/upload",n,{});case 6:o=e.sent;case 7:return e.next=9,m.a.post("/students/create",{profileUrl:null===(t=o)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.path,name:a,setuserID:Ie?null:Be,middleName:D,surname:x,gender:C,dateofBirth:U,email:L,nationality:H,religion:W,placeOfBirth:M,health:$,disease:oe,allege:se,classID:Re,division:dt,dormitoryID:Ye,section:ze,status:Qe,campusID:Ee,scholarship:tt,fees:rt,lastSchool:{school:bt,reason:pt},mobilenumber:xt,telephone:Ct,postalAddress:Ut,physicalAddress:Dt,guadian:Lt}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!1),!t.data.error){e.next=4;break}return Object(h.c)(t.data.error),e.abrupt("return",0);case 4:return e.next=6,m.a.post("/activitylog/create",{activity:"student  ".concat(a," ").concat(x," was created"),user:"admin"});case 6:Object(h.m)("stundent ".concat(t.data.student.userID," successfully added")),Gt();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ue(!1),console.log(e),Object(h.c)("something went wrong")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Add New Students"}),Object(f.jsx)("div",{children:Object(f.jsxs)("form",{className:"content__container",children:[Object(f.jsx)(j.a,{profileimg:Se,profileUrl:me,setprofileUrl:function(e){var t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)Object(h.c)("image is too large");else if(t){he(t);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){ge(a.result)}}else console.log("no file selected")}}),Object(f.jsx)("br",{className:"my-5"}),Object(f.jsx)(i.a,{register:ve,errors:Ne,name:a,setname:s,secondName:D,setsecondName:w,lastname:x,setlastname:v,gender:C,setgender:A,dateofBirth:U,setdateofBirth:F,email:L,setemail:T,nationality:H,setnationality:q,placeofBirth:M,setplaceofBirth:P,religion:W,setreligion:X,healthCon:$,setHealthCon:ee,disease:oe,setDisease:ie,allerge:se,setallerge:ce}),Object(f.jsx)("br",{className:"my-5"}),Object(f.jsx)(b.a,{register:ve,errors:Ne,autoID:Ie,setautoID:ke,userID:Be,setuserID:_e,classID:Re,setclass:Je,division:dt,setdivision:Ot,section:ze,setsection:Ge,status:Qe,setstatus:Ve,dormitory:Ye,setdormitory:Ze,schoolarship:tt,setschoolarship:at,feesCategory:rt,setfeesCategory:nt,lastSchool:bt,campus:Ee,setcampus:Ke,setlastSchool:lt,reasonforTransfer:pt,setreasonforTransfer:ft}),Object(f.jsx)("br",{className:"my-5"}),Object(f.jsx)(l.a,{register:ve,errors:Ne,mobilenumber:xt,setmobilenumber:vt,residence:Dt,setresidence:wt,settelephone:At,telephone:Ct,setpostalAddress:Ft,postalAddress:Ut}),Object(f.jsx)("br",{className:"my-5"}),Object(f.jsx)(u.a,{guadian:Lt,setguadian:Tt}),Object(f.jsx)("div",{className:"row",children:Lt&&Lt.map((function(e,t){return Object(f.jsx)("div",{className:"col-xs-12 col-sm-6",children:Object(f.jsx)(O.a,{guadian:e,handleDeleteGuadian:zt},t)})}))}),Object(f.jsx)("br",{className:"my-5"}),Object(f.jsxs)("div",{className:"row ",children:[Object(f.jsx)("button",{disabled:je,type:"submit",onClick:ye(Ht),className:"col btn orange__btn mr-5",children:je?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(f.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):"Create"}),Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),Gt()},className:"col btn blue__btn",children:"Reset"})]})]})})]})}}}]);
//# sourceMappingURL=184.660ea811.chunk.js.map