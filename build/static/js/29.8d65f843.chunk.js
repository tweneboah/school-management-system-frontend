(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[29],{1192:function(e,t,c){"use strict";c(1);var s=c(14);t.a=function(){return Object(s.jsx)("div",{className:"default__chat",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Welcome , Admin "}),Object(s.jsx)("h4",{children:"Messaging Chat system"})]})})}},1230:function(e,t,c){"use strict";var s=c(716),n=c(1),a=c(135),i=c(1966),r=c(38),d=c(718),l=c(14);var o=function(e){var t=e.chat,c=e.currentUser,o=Object(n.useState)({}),j=Object(s.a)(o,2),u=j[0],b=j[1],h=Object(n.useState)({}),v=Object(s.a)(h,2),O=v[0],m=v[1];return Object(n.useEffect)((function(){var e=c===(null===t||void 0===t?void 0:t.requestor_id)?null===t||void 0===t?void 0:t.acceptor_id:null===t||void 0===t?void 0:t.requestor_id;r.a.get("/user/".concat(e.trim())).then((function(e){var c=e.data.user;b({profileUrl:null===c||void 0===c?void 0:c.profileUrl,name:null===c||void 0===c?void 0:c.name,surname:null===c||void 0===c?void 0:c.surname}),m(null===t||void 0===t?void 0:t.messages.pop())}))}),[t,c]),Object(l.jsx)("div",{className:"sidemessage",children:Object(l.jsxs)(a.b,{to:"/messages/chat/".concat(null===t||void 0===t?void 0:t._id),className:"d-flex",children:[Object(l.jsx)("div",{className:"mr-2",children:Object(l.jsx)(i.a,{alt:Object(d.h)((null===u||void 0===u?void 0:u.name)||"O"),src:Object(d.g)(null===u||void 0===u?void 0:u.profileUrl)})}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"d-flex align-center justify-content-between w-100",children:[Object(l.jsxs)("h6",{children:[Object(d.d)(null===u||void 0===u?void 0:u.name)," ",Object(d.i)(Object(d.d)(null===u||void 0===u?void 0:u.surname),5)]}),Object(l.jsx)("small",{className:"text-muted",children:Object(d.n)(null===O||void 0===O?void 0:O.date)})]}),Object(l.jsx)("span",{children:Object(d.i)((null===O||void 0===O?void 0:O.message)||"last message...",20)})]})]})})},j=c(76),u=c(60),b=c(1283),h=c.n(b),v=c(77),O=c(750),m=c(101),x=c(948),f=c(796),p=c(847),g=c(848),_=c(927),N=c(1807),S=c(744),y=c.n(S),C=c(1522),w=c(1124),D=c.n(w),U=c(1134),k=c.n(U),I=c(564),q=Object(m.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},icon:{width:"50px",height:"50px"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,c=e.classes,s=e.onClose,n=Object(O.a)(e,["children","classes","onClose"]);return Object(l.jsxs)(p.a,Object(v.a)(Object(v.a)({disableTypography:!0,className:c.root},n),{},{children:[Object(l.jsx)(C.a,{variant:"h6",children:t}),s?Object(l.jsx)(N.a,{"aria-label":"close",className:c.closeButton,onClick:s,children:Object(l.jsx)(y.a,{})}):null]}))})),R=Object(m.a)((function(e){return{root:{padding:e.spacing(2)}}}))(g.a),A=Object(m.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(_.a);function E(e){var t=e.open,c=e.setOpen,s=e.search,n=e.setsearch,a=e.handleSearch,i=e.loadingSearch,r=e.searchResults,d=e.loading,o=e.handleSendRequest,j=e.setsearchResults,u=function(){n(""),j(""),c(!1)};return Object(l.jsx)("div",{children:Object(l.jsxs)(f.a,{fullWidth:!0,maxWidth:"sm",onClose:u,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(l.jsx)(q,{id:"customized-dialog-title",onClose:u,children:"Find User"}),Object(l.jsxs)(R,{children:[Object(l.jsx)("form",{action:"",onSubmit:a,children:Object(l.jsxs)("div",{className:"search__user",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)(D.a,{}),Object(l.jsx)("input",{value:s,onChange:function(e){return n(e.target.value)},type:"text",placeholder:"Search by name or userID"})]}),s&&!i&&Object(l.jsx)(k.a,{onClick:function(){n("")}}),Object(l.jsx)("div",{children:i&&Object(l.jsx)(I.a,{style:{width:"20px",height:"20px"}})})]})}),Object(l.jsxs)("div",{className:"mt-3 d-flex results__container justify-content-between align-items-start",children:[Object(l.jsx)("ul",{children:r&&r.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsxs)("button",{onClick:function(){return o(null===e||void 0===e?void 0:e.userID)},className:"btn",children:[e.name," ",e.surname," - ",e.userID]})})}))}),d&&Object(l.jsx)(I.a,{style:{width:"20px",height:"20px"}})]})]}),Object(l.jsx)(A,{children:Object(l.jsx)(x.a,{autoFocus:!0,onClick:u,color:"primary",children:"Close"})})]})})}t.a=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),c=t[0],a=t[1],i=Object(j.c)(u.d),b=Object(n.useState)(!1),v=Object(s.a)(b,2),O=v[0],m=v[1],x=Object(n.useState)(""),f=Object(s.a)(x,2),p=f[0],g=f[1],_=Object(n.useState)(""),N=Object(s.a)(_,2),S=N[0],y=N[1],C=Object(n.useState)(!1),w=Object(s.a)(C,2),D=w[0],U=w[1],k=Object(n.useState)(!1),I=Object(s.a)(k,2),q=I[0],R=I[1];return Object(n.useEffect)((function(){r.a.get("/chats/chats/".concat(null===i||void 0===i?void 0:i.id)).then((function(e){a(e.data)}))}),[i]),Object(l.jsxs)("div",{className:"sidebar",children:[Object(l.jsx)("div",{className:"sidebar__header p-2 mb-2",children:Object(l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(l.jsx)("h5",{children:Object(l.jsx)("strong",{children:"Chats"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:function(){return m(!0)},className:"btn",children:Object(l.jsx)(h.a,{})})})]})}),Object(l.jsx)("div",{children:c&&c.sort((function(e,t){return e.updatedAt-t.updatedAt})).map((function(e){return Object(l.jsx)(o,{chat:e,currentUser:null===i||void 0===i?void 0:i.id},e._id)}))}),Object(l.jsx)(E,{search:p,setsearch:g,handleSearch:function(e){console.log("search"),e.preventDefault(),p&&(U(!0),r.a.get("/users/search/".concat(p)).then((function(e){var t=e.data;U(!1),y(t)})).catch((function(e){console.log(e),R(!1)})))},open:O,searchResults:S,setsearchResults:y,loadingSearch:D,setOpen:m,loading:q,handleSendRequest:function(e){R(!0),r.a.post("/chats/create",{acceptor_id:e,requestor_id:null===i||void 0===i?void 0:i.userID}).then((function(e){if(R(!1),e.data.error)return Object(d.c)(e.data.error);m(!1),r.a.get("/chats/chats/".concat(null===i||void 0===i?void 0:i.userID)).then((function(e){a(e.data)}))})).catch((function(e){Object(d.c)("Faild"),R(!1)}))}})]})}},1231:function(e,t,c){"use strict";var s=c(733),n=c.n(s),a=c(734),i=c(716),r=c(1),d=c(718),l=c(14);var o=function(e){var t=e.message,c=e.currentUser;return Object(l.jsxs)("div",{className:c===(null===t||void 0===t?void 0:t.senderID)?"sender__mesaage message":"message",children:[Object(l.jsx)("div",{className:"message__content",children:null===t||void 0===t?void 0:t.message}),Object(l.jsx)("div",{className:"message__time ",children:Object(d.n)(t.date)})]})},j=c(22),u=c(38),b=c(76),h=c(60),v=c(1966);t.a=function(){var e=Object(j.i)().id,t=Object(r.useState)([]),c=Object(i.a)(t,2),s=c[0],O=c[1],m=Object(r.useState)(""),x=Object(i.a)(m,2),f=x[0],p=x[1],g=Object(r.useState)({}),_=Object(i.a)(g,2),N=_[0],S=_[1],y=Object(b.c)(h.d);return Object(r.useEffect)((function(){u.a.get("/chats/chat/".concat(e)).then(function(){var e=Object(a.a)(n.a.mark((function e(t){var c,s,a,i,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(null===(c=t.data)||void 0===c?void 0:c.messages),r=(null===y||void 0===y?void 0:y.id)===(null===(s=t.data)||void 0===s?void 0:s.requestor_id)?null===(a=t.data)||void 0===a?void 0:a.acceptor_id:null===(i=t.data)||void 0===i?void 0:i.requestor_id,e.next=4,u.a.get("/user/".concat(r)).then((function(e){S(e.data.user)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,y]),Object(l.jsxs)("div",{className:"message__container",children:[Object(l.jsxs)("div",{className:"header d-flex",children:[Object(l.jsx)(v.a,{src:Object(d.g)(null===N||void 0===N?void 0:N.profileUrl),alt:Object(d.h)((null===N||void 0===N?void 0:N.name)||"U")}),Object(l.jsxs)("div",{className:"ml-3",children:[Object(l.jsxs)("h6",{children:[" ",Object(d.d)((null===N||void 0===N?void 0:N.name)||"A")," ",Object(d.d)(null===N||void 0===N?void 0:N.surname)]}),Object(l.jsx)("span",{children:null===N||void 0===N?void 0:N.userID})]})]}),Object(l.jsx)("div",{className:"message__messages p-2",children:s&&s.map((function(e){return Object(l.jsx)(o,{message:e,currentUser:null===y||void 0===y?void 0:y.id},e._id)}))}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f&&u.a.put("/chats/send/".concat(e),{message:f,senderID:null===y||void 0===y?void 0:y.id}).then((function(e){var t;console.log(e.data),O(null===(t=e.data.doc)||void 0===t?void 0:t.messages),p("")}))},className:"send",children:[Object(l.jsx)("input",{value:f,onChange:function(e){return p(e.target.value)},type:"text",placeholder:"Type here ..."}),Object(l.jsx)("button",{type:"submit",className:"btn",children:"Send"})]})]})}},1831:function(e,t,c){"use strict";c.r(t);c(1);var s=c(22),n=c(1230),a=c(1231),i=c(1192),r=c(14);t.default=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:" messages__container ",children:[Object(r.jsx)(n.a,{}),Object(r.jsx)("div",{className:"containing__chat",children:Object(r.jsxs)(s.d,{children:[Object(r.jsx)(s.b,{component:a.a,path:"/messages/chat/:id"}),Object(r.jsx)(s.b,{component:i.a,path:"/messages/chat"})]})})]})})}}}]);
//# sourceMappingURL=29.8d65f843.chunk.js.map