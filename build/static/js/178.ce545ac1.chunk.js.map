{"version":3,"sources":["AdminComponents/attendance/StudentAttendance/StudentsAttendanceHistory.js"],"names":["Attendance","useState","classID","setclassID","date","setDate","attendanceData","setattendanceData","storeData","setstoreData","classes","useSelector","selectClasses","useEffect","axios","get","then","res","console","log","data","inputFields","type","label","value","options","map","e","id","classCode","name","onChange","handleSearch","preventDefault","newClasses","filter","i","toLowerCase","includes","Date","toISOString","handleReset","title","className","to"],"mappings":"wNA2FeA,UAnFf,WAAuB,IAAD,EACUC,mBAAS,IADnB,mBACbC,EADa,KACJC,EADI,OAEIF,mBAAS,IAFb,mBAEbG,EAFa,KAEPC,EAFO,OAGwBJ,mBAAS,IAHjC,mBAGbK,EAHa,KAGGC,EAHH,OAIcN,mBAAS,IAJvB,mBAIbO,EAJa,KAIFC,EAJE,KAKdC,EAAUC,YAAYC,KA0B5BC,qBAAU,WACRC,IAAMC,IAAI,wBAAwBC,MAAK,SAACC,GACtCC,QAAQC,IAAIF,EAAIG,MAChBb,EAAkBU,EAAIG,MACtBX,EAAaQ,EAAIG,WAElB,IAEH,IAAMC,EAAc,CAClB,CACEC,KAAM,SACNC,MAAO,kBACPC,MAAOtB,EACPuB,QAASf,EAAQgB,KAAI,SAACC,GACpB,MAAO,CACLC,GAAID,EAAEE,UACNC,KAAMH,EAAEG,SAGZA,KAAM,YACNC,SAAU5B,IAWd,OACE,gCACE,cAAC,IAAD,CACE6B,aA1De,SAACL,GACpBA,EAAEM,iBACF,IAAIC,EAAa,GACbhC,IACFgC,EAAa1B,EAAU2B,QAAO,SAACC,GAAD,oBAC5BA,QAD4B,IAC5BA,GAD4B,UAC5BA,EAAGlC,eADyB,aAC5B,EAAYmC,cAAcC,SAA1B,OAAmCpC,QAAnC,IAAmCA,OAAnC,EAAmCA,EAASmC,mBAG5CjC,IAEF8B,EAAaA,EAAWC,QAAO,SAACC,GAAD,oBAC7BA,QAD6B,IAC7BA,GAD6B,UAC7BA,EAAGhC,YAD0B,aAC7B,EAASkC,SAAS,IAAIC,KAAKnC,GAAMoC,mBAGrCjC,EAAkB2B,IA6CdO,YA1Cc,SAACd,GACnBA,EAAEM,iBACF9B,EAAW,IACXE,EAAQ,IACRE,EAAkBC,IAuCdkC,MAAM,uBACNrB,YAAaA,IAEf,sBAAKsB,UAAU,qBAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,mDACA,cAAC,IAAD,CAAMC,GAAG,gCAAgCD,UAAU,gBAAnD,oCAIF,cAAC,IAAD,CAAOrC,eAAgBA","file":"static/js/178.ce545ac1.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Search from \"../../shared/Search\";\nimport Table from \"../../shared/AttendanceTable\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../../store/slices/schoolSlice\";\n\nfunction Attendance() {\n  const [classID, setclassID] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [attendanceData, setattendanceData] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const classes = useSelector(selectClasses);\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newClasses = [];\n    if (classID) {\n      newClasses = storeData.filter((i) =>\n        i?.classID?.toLowerCase().includes(classID?.toLowerCase())\n      );\n    }\n    if (date) {\n      //let today = new Date()\n      newClasses = newClasses.filter((i) =>\n        i?.date?.includes(new Date(date).toISOString())\n      );\n    }\n    setattendanceData(newClasses);\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setclassID(\"\");\n    setDate(\"\");\n    setattendanceData(storeData);\n  };\n\n  useEffect(() => {\n    axios.get(\"/attendance/students\").then((res) => {\n      console.log(res.data);\n      setattendanceData(res.data);\n      setstoreData(res.data);\n    });\n  }, []);\n\n  const inputFields = [\n    {\n      type: \"select\",\n      label: \"Search by Class\",\n      value: classID,\n      options: classes.map((e) => {\n        return {\n          id: e.classCode,\n          name: e.name,\n        };\n      }),\n      name: \"studentID\",\n      onChange: setclassID,\n    },\n    // {\n    //   type: \"date\",\n    //   label: \"Search by Date\",\n    //   value: date,\n    //   name: \"date\",\n    //   onChange: setDate,\n    // },\n  ];\n\n  return (\n    <div>\n      <Search\n        handleSearch={handleSearch}\n        handleReset={handleReset}\n        title=\"Student's Attendance\"\n        inputFields={inputFields}\n      />\n      <div className=\"content__container\">\n        <div className=\"d-flex justify-content-between mb-3\">\n          <h3>Attendance Record</h3>\n          <Link to=\"/attendance/students/register\" className=\"btn blue__btn\">\n            Register Attendance\n          </Link>\n        </div>\n        <Table attendanceData={attendanceData} />\n      </div>\n    </div>\n  );\n}\n\nexport default Attendance;\n"],"sourceRoot":""}