{"version":3,"sources":["StudentComponents/messages/MessageAdmin.js","components/messages/SendToForm.js"],"names":["MessageAdmin","useState","message","setmessage","recipient","setrecipient","user","useSelector","selectUser","loading","setloading","recipientOptions","id","name","onSend","e","preventDefault","axios","post","sender","userID","telephone","then","res","console","log","data","error","errorAlert","successAlert","catch","err","searchOptions","map","option","value","sendto","SendToForm","action","className","htmlFor","onChange","target","defaultChecked","hidden","disabled","type","readOnly","rows","required","placeholder","onClick","role","aria-hidden"],"mappings":"8MAyEeA,UAlEf,WACE,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAkCF,mBAAS,SAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACMC,EAAOC,YAAYC,KACzB,EAA8BP,oBAAS,GAAvC,mBAAOQ,EAAP,KAAgBC,EAAhB,KAEMC,EAAmB,CACvB,CACEC,GAAI,QACJC,KAAM,UAwCV,OACE,8BACE,cAAC,IAAD,CACEX,QAASA,EACTC,WAAYA,EACZW,OAzCS,SAACC,GACdA,EAAEC,iBACEd,GAAWE,IACbM,GAAW,GACXO,IACGC,KADH,cACuB,CACnBhB,UACAiB,OAAM,OAAEb,QAAF,IAAEA,OAAF,EAAEA,EAAMM,GACdQ,OAAQhB,EACRiB,UAAW,KAEZC,MAAK,SAACC,GAGL,GAFAC,QAAQC,IAAIF,GACZb,GAAW,GACPa,EAAIG,KAAKC,MAEX,OADAC,YAAWL,EAAIG,KAAKC,OACb,EAETE,YAAa,gBACb1B,EAAW,OAEZ2B,OAAM,SAACC,GACNP,QAAQC,IAAIM,GACZrB,GAAW,QAmBbD,QAASA,EACTL,UAAWA,EACX4B,cAhBgB,WACpB,OAAOrB,EAAiBsB,KAAI,SAACC,GAAD,OAC1B,wBAAwBC,MAAOD,EAAOtB,GAAtC,SACGsB,EAAOrB,MADGqB,EAAOtB,QAelBwB,OAAO,eACP/B,aAAcA,EACdc,OAAM,OAAEb,QAAF,IAAEA,OAAF,EAAEA,EAAMM,S,iCCnEtB,iBAoFeyB,IAlFf,YAWI,IAVFnC,EAUC,EAVDA,QACAC,EASC,EATDA,WACAW,EAQC,EARDA,OACAV,EAOC,EAPDA,UACAC,EAMC,EANDA,aACAc,EAKC,EALDA,OACAiB,EAIC,EAJDA,OACAJ,EAGC,EAHDA,cACAvB,EAEC,EAFDA,QACAkB,EACC,EADDA,MAEA,OACE,uBAAMW,OAAO,GAAGC,UAAU,mCAA1B,UACE,qBAAKA,UAAU,SAAf,SACE,kDAAqBH,OAEvB,sBAAKG,UAAU,gBAAf,UACE,uBAAOA,UAAU,WAAWC,QAAQ,GAApC,wBAGA,qBAAKD,UAAU,YAAf,SACE,yBACEJ,MAAO/B,EACPqC,SAAU,SAAC1B,GAAD,OAAOV,EAAaU,EAAE2B,OAAOP,QACvCvB,GAAG,aACH2B,UAAU,cAJZ,UAME,wBAAQI,gBAAc,EAACC,QAAM,EAA7B,uBAGCZ,EACCA,IAEA,wBAAQa,UAAQ,EAAhB,gCAMR,sBAAKN,UAAU,gBAAf,UACE,uBAAOA,UAAU,WAAWC,QAAQ,GAApC,qBAGA,qBAAKD,UAAU,YAAf,SACE,uBAAOA,UAAU,eAAeJ,MAAOhB,EAAQ2B,KAAK,OAAOC,UAAQ,SAGvE,sBAAKR,UAAU,WAAf,UACE,qBAAKA,UAAU,SAAf,SACE,0BACEJ,MAAOjC,EACPuC,SAAU,SAAC1B,GAAD,OAAOZ,EAAWY,EAAE2B,OAAOP,QACrCI,UAAU,eACV1B,KAAK,GACLmC,KAAK,KACLC,UAAQ,EACRC,YAAY,gBAGfvB,GAAS,qBAAKY,UAAU,+BAAf,SAA+CZ,IACzD,qBAAKY,UAAU,SAAf,SACE,yBACEM,SAAUpC,EACV0C,QAASrC,EACTyB,UAAU,sBAHZ,UAKG9B,GACC,sBACE8B,UAAU,mCACVa,KAAK,SACLC,cAAY,SATlB","file":"static/js/169.d65e30d1.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport SendForm from \"../../components/messages/SendToForm\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\n\nfunction MessageAdmin() {\n  const [message, setmessage] = useState(\"\");\n  const [recipient, setrecipient] = useState(\"admin\");\n  const user = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n\n  const recipientOptions = [\n    {\n      id: \"admin\",\n      name: \"admin\",\n    },\n  ];\n\n  const onSend = (e) => {\n    e.preventDefault();\n    if (message && recipient) {\n      setloading(true);\n      axios\n        .post(`/chats/user`, {\n          message,\n          sender: user?.id,\n          userID: recipient,\n          telephone: \"\",\n        })\n        .then((res) => {\n          console.log(res);\n          setloading(false);\n          if (res.data.error) {\n            errorAlert(res.data.error);\n            return 0;\n          }\n          successAlert(\"message send\");\n          setmessage(\"\");\n        })\n        .catch((err) => {\n          console.log(err);\n          setloading(false);\n        });\n    }\n  };\n\n  const searchOptions = () => {\n    return recipientOptions.map((option) => (\n      <option key={option.id} value={option.id}>\n        {option.name}\n      </option>\n    ));\n  };\n\n  return (\n    <div>\n      <SendForm\n        message={message}\n        setmessage={setmessage}\n        onSend={onSend}\n        loading={loading}\n        recipient={recipient}\n        searchOptions={searchOptions}\n        sendto=\"School Admin\"\n        setrecipient={setrecipient}\n        sender={user?.id}\n      />\n    </div>\n  );\n}\n\nexport default MessageAdmin;\n","import React from \"react\";\n\nfunction SendToForm({\n  message,\n  setmessage,\n  onSend,\n  recipient,\n  setrecipient,\n  sender,\n  sendto,\n  searchOptions,\n  loading,\n  error,\n}) {\n  return (\n    <form action=\"\" className=\" content__container form__sender\">\n      <div className=\"header\">\n        <h3>Send Message to {sendto}</h3>\n      </div>\n      <div className=\"row mb-2 px-3\">\n        <label className=\"col-sm-2\" htmlFor=\"\">\n          Recipient:\n        </label>\n        <div className=\"col-sm-10\">\n          <select\n            value={recipient}\n            onChange={(e) => setrecipient(e.target.value)}\n            id=\"inputState\"\n            className=\"form-select\"\n          >\n            <option defaultChecked hidden>\n              Choose...\n            </option>\n            {searchOptions ? (\n              searchOptions()\n            ) : (\n              <option disabled>No options</option>\n            )}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"row mb-2 px-3\">\n        <label className=\"col-sm-2\" htmlFor=\"\">\n          Sender:\n        </label>\n        <div className=\"col-sm-10\">\n          <input className=\"form-control\" value={sender} type=\"text\" readOnly />\n        </div>\n      </div>\n      <div className=\"mb-2 row\">\n        <div className=\"col-12\">\n          <textarea\n            value={message}\n            onChange={(e) => setmessage(e.target.value)}\n            className=\"form-control\"\n            name=\"\"\n            rows=\"10\"\n            required\n            placeholder=\"Type here\"\n          ></textarea>\n        </div>\n        {error && <div className=\"text-danger text-center mb-2\">{error}</div>}\n        <div className=\"col-12\">\n          <button\n            disabled={loading}\n            onClick={onSend}\n            className=\"btn blue__btn w-100\"\n          >\n            {loading && (\n              <span\n                className=\"spinner-border spinner-border-sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n              ></span>\n            )}\n            Send\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default SendToForm;\n"],"sourceRoot":""}